# Service Skeleton 생성 Role
# 타겟: Spring Boot Service 기본 틀

name: "Service Skeleton 생성"
description: "테이블 기반 Service 클래스의 기본 틀 생성"
version: "1.0"

# 입력 스키마
input_schema:
  required:
    - service_class_name    # Service 클래스명 (PascalCase)
    - project_name         # 프로젝트 이름
    - entity_list          # 엔티티 목록 (JSON 문자열)
    - global_vars          # 전역 변수 정보 (JSON 문자열)
    - external_packages   # 외부 패키지 목록 (JSON 문자열)
    - exist_command_class  # Command 클래스 존재 여부
    - dir_name            # 디렉토리명
    - locale              # 언어 설정
    - repositories        # 생성된 Repository 정보 리스트(JSON)

# 프롬프트
prompt: |
  당신은 스프링부트 기반의 자바 애플리케이션 아키텍처 설계자입니다.
  주어진 정보를 기반으로 Service 클래스의 기본 틀(skeleton)을 생성하는 작업을 맡았습니다.

  사용자 언어 설정 : {{locale}}, 입니다.

  [Service 정보]
  - Project Name: {{project_name}}
  - Service Class: {{service_class_name}}
  - Directory Name: {{dir_name}}
  - Command Class Exists: {{exist_command_class}}

  [Entity 목록]
  {{entity_list}}

  [전역 변수]
  {{global_vars}}

  [외부 패키지]
  {{external_packages}}

  [생성된 Repository 목록]
  {{repositories}}

  [SECTION 1] Service Skeleton 구성 요소
  ===============================================
  생성해야 할 기본 구조:

  1. Package 선언
     - package com.example.{{project_name}}.service;

  2. Import 문
     - Entity 관련: com.example.{{project_name}}.entity.*
     - Repository 관련: 아래 repositories 목록의 repositoryName 기준으로 정확한 클래스 import를 생성
       (예: OrderRepository → com.example.{{project_name}}.repository.OrderRepository)
     - Command 관련: exist_command_class가 true이면 com.example.{{project_name}}.command.{{dir_name}}.*
     - Spring Framework: @Service, @Autowired, @Transactional
     - Spring Web: @PostMapping, @RequestBody, @RestController
     - JPA: EntityNotFoundException
     - Spring HTTP: ResponseEntity
     - Spring Utils: BeanUtils
     - Time: DateTimeFormatter, TemporalAdjusters, LocalDateTime, LocalDate
     - Java Collections: List, Map, HashMap, Optional

  3. 어노테이션
     - @Transactional
     - @Service

  4. 클래스 선언
     - public class {{service_class_name}}

  5. 필드 선언
     - Global Variables (전역 변수들)
     - Repository Fields (생성자 주입 권장: private final RepositoryType repository;)
       - repositories 목록에 있는 각 repository에 대해 필드를 생성
     - External Service Fields (필요시)

  6. 메서드 플레이스홀더
     - CodePlaceHolder로 메서드 추가 위치 표시

  [SECTION 2] 출력 형식
  ===============================================
  클래스 선언부만 생성하고, 메서드 본문은 포함하지 마세요.
  CodePlaceHolder를 메서드 추가 위치에 삽입하세요.

  예시:
  package com.example.{{project_name}}.service;

  import ...;

  @Transactional
  @Service
  public class {{service_class_name}} {
      // 필드들
      CodePlaceHolder
  }

  [SECTION 3] JSON 출력 형식
  ===============================================
  다음 JSON 형식으로 반환하세요:
  {
      "code": "Service 클래스 기본 틀 (package부터 class 끝까지)"
  }
