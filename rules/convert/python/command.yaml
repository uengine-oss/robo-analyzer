# Command 클래스 생성 Role
# 타겟: FastAPI Command DTO

name: "Command 클래스 생성"
description: "프로시저 파라미터를 Command DTO로 변환"
version: "1.0"

# 저장 경로 정의
path: "command/{dir_name}"

# 입력 스키마
input_schema:
  required:
    - command_class_data  # Command 클래스 데이터 (JSON 문자열)
    - dir_name            # 디렉토리 이름
    - project_name        # 프로젝트 이름
    - locale              # 언어 설정

# 프롬프트
prompt: |
  당신은 PL/SQL 프로시저를 FastAPI 애플리케이션으로 마이그레이션하는 전문가입니다.
  주어진 JSON 데이터에서 'parameters'와 'procedure_name' 정보를 활용하여 Command 클래스를 생성합니다.
  
  
  사용자 언어 설정 : {{locale}}, 입니다. 이를 반영하여 결과를 생성해주세요.
  
  
  [입력 데이터 구조 설명]
  ===============================================
  입력되는 JSON 데이터는 다음 구조를 가집니다:
  {{command_class_data}}
  
  - parameters: 프로시저의 입력 파라미터 목록
  - procedure_name: 프로시저 이름
  
  {{dir_name}}
  
  - dir_name: 클래스가 저장될 디렉토리 이름(import문에 사용)
  
  
  [SECTION 1] Command 클래스 생성 규칙
  ===============================================
  1. 기본 구조
     - JSON의 'procedure_name' 값을 사용하여 클래스명 생성
     - 형식: {{procedure_name}}Command
     - 예시) procedure_name이 'UPDATE_EMPLOYEE'인 경우 -> UpdateEmployeeCommand
     - 첫 글자는 대문자로 변환 필수
  
  2. 필드 생성 규칙
     - JSON의 'parameters' 배열의 각 항목을 필드로 변환
     - 명명규칙: 스네이크 케이스 (첫 글자 소문자)
     - 데이터 타입 매핑:
       * NUMBER, NUMERIC, INTEGER, DECIMAL, BIGDECIMAL 등 모든 숫자 타입 -> 반드시 int만 사용
       * VARCHAR, VARCHAR2, CHAR -> str
       * DATE -> date
       * TIMESTAMP -> datetime
       * 테이블 이름의 경우 테이블 명을 타입으로 사용하세요. (엔티티 클래스를 타입으로 설정)
      - 'parameters'에 없는 변수는 절대 생성하지 않음
  
  3. import 추가 규칙
     - Command 클래스 예시에 있는 import문들은 반드시 추가하세요.
     - 필요한 import문은 다음과 같습니다.
       * from dataclasses import dataclass
       * from datetime import date, datetime
       * from {{project_name}}.entity.EntityName import EntityName
     - 추가적인 import문은 반드시 필요에 따라 작성하세요.
  
  
  [SECTION 2] Command 클래스 예시
  ===============================================
  예시:
  from dataclasses import dataclass
  from datetime import date, datetime
  from {{project_name}}.entity.{{dir_name}} import Employee
  
  @dataclass
  class ExampleCommand:
      id: int
      name: str
      date_value: date
      time_value: datetime
      employee: Employee
  
  
  [SECTION 3] 출력 형식
  ===============================================
  부가 설명 없이 결과만을 포함하여, 다음 JSON 형식으로 반환하세요:
  {
      "commandName": "Command Class Name",
      "command": "Command Python Code",
      "command_class_variable": [
          "Command Class에 선언된 모든 변수들을 '타입:이름' 형태로 채워넣으세요."
      ]
  }