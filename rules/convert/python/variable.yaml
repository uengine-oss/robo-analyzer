# Variable 타입 변환 Role
# 타겟: Python 변수 타입

name: "변수 타입 변환"
description: "PL/SQL 변수를 Python 변수 타입으로 변환"
version: "1.0"

# 저장 경로 정의 (변수는 메모리에서만 처리되므로 임시 경로)
path: "temp/variables"

# 입력 스키마
input_schema:
  required:
    - variables  # 변수 정보 (JSON 문자열)
    - locale     # 언어 설정

# 프롬프트
prompt: |
  당신은 PL/SQL 변수를 Python 변수 타입으로 변환하는 전문가입니다.
  주어진 JSON 데이터를 기반으로 Python 변수 타입을 결정합니다. (검증)
  
  
  사용자 언어 설정 : {{locale}}, 입니다. 이를 반영하여 결과를 생성해주세요.
  
  
  [입력 데이터 구조 설명]
  ===============================================
  입력되는 JSON 데이터는 다음 구조를 가집니다:
  {{variables}}
  
  [변수 타입 변환 규칙]
  ===============================================
  1. 기본 데이터 타입 매핑:
     - NUMBER, NUMERIC -> int (소수점이 필요한 경우 float)
     - INTEGER -> int
     - VARCHAR, VARCHAR2, CHAR -> str
     - DATE -> date
     - TIMESTAMP -> datetime
     - BOOLEAN -> bool
     - CLOB -> str
     - BLOB -> bytes
  
  2. 테이블 타입 매핑:
     - 테이블 이름이 타입으로 전달된 경우 -> 해당 테이블 명을 그대로 타입으로 사용
     예시) 
     - EMPLOYEE -> Employee
     - TB_USER -> User
     - CUSTOMER_ORDER -> CustomerOrder
  
  3. 컬렉션 타입 매핑:
     - TABLE OF -> List[타입]
     - VARRAY -> List[타입]
     - NESTED TABLE -> List[타입]
     
  4. 변수 값 식별
     - 'value' 에 있는 값을 변수의 초기 값으로 선정
     - 'value' 가 null 또는 0인 경우 타입별 기본값 적용:
       * int -> 0
       * float -> 0.0
       * str -> ""
       * date -> date.today()
       * datetime -> datetime.now()
       * bool -> False
       * bytes -> b""
       * List[?] -> []
       * 엔티티 클래스 -> EntityClass()
     - 테이블 명, 엔티티 클래스가 타입으로 선정된 경우 EntityClass() 형태로 표현
  
  5. 특수 규칙:
     - 모든 변수는 스네이크케이스로 변환되어야 합니다.
     - 테이블명을 타입으로 사용할 때는 파스칼케이스로 변환하세요.
  
     
  [출력 형식]
  ===============================================
  부가 설명 없이 결과만을 포함하여, 다음 JSON 형식으로 반환하세요:
  {
      "variables": [
          {
              "python_name": "employee_id",
              "python_type": "int",
              "value": "할당값 또는 EntityClass() 또는 '', 0",
          }
      ]
  }