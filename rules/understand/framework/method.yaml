name: "method_prompt"
description: "Java 메서드의 시그니처 분석 - 파라미터/반환 타입 추출 및 의존 관계 식별"
version: "1.0"

input_schema:
  required:
    - declaration_code
  optional:
    locale:
      default: "ko"

prompt: |
  [ROLE]
  당신은 Java 메서드의 시그니처를 분석하는 전문가입니다.
  메서드의 파라미터 타입과 반환 타입을 추출하여 클래스 다이어그램의 의존 관계(Dependency) 식별에 필요한 정보를 제공합니다.
  
  
  [INPUT_DATA]
  분석 대상 Java 메서드 코드 (시그니처 + 자식 요약된 본문):
  {{ declaration_code }}
  
  
  [ANALYSIS_RULES]
  1. 메서드 시그니처 분석
     - 메서드명
     - 반환 타입 (void 포함)
     - 파라미터 목록 (이름, 타입)
     - 접근 제어자 (public, private, protected, default)
     - static 여부
  
  2. 의존 관계 대상 타입 추출
     - 파라미터 타입 중 사용자 정의 클래스
     - 반환 타입이 사용자 정의 클래스인 경우
     - 제네릭 내부 타입도 추출 (List<Order> → Order)
  
  3. 제외 대상 (dependencies에 포함 금지!)
     - primitive 타입 (int, long, double, boolean 등)
     - wrapper 타입 (Integer, Long, Double, Boolean 등)
     - String, Object 타입
     - void
     - 컬렉션 타입: List, ArrayList, Set, HashSet, Map, HashMap, Collection, Iterator 등
       → 컬렉션 자체는 제외, 제네릭 내부 타입만 추출 (List<Order> → Order만 포함)
     - Java 기본 클래스: Optional, Stream, Date, Exception 등
  
  4. 메서드 종류 판별
     - getter: getXxx(), isXxx() 형태이고 파라미터 없음
     - setter: setXxx() 형태이고 파라미터 1개
     - constructor: 클래스명과 동일
     - normal: 일반 메서드
  
  5. 필드 할당 패턴 분석 (연관 관계 세분화용)
     value_source 판단 기준:
     - "parameter": 필드에 메서드 파라미터를 할당 (외부 주입 → Aggregation)
       예: this.engine = engine; (engine이 파라미터)
     - "new": 필드에 new로 생성된 객체를 할당 (내부 생성 → Composition)
       예1: this.engine = new Engine();
       예2: Engine e = new Engine(); this.engine = e; (로컬변수가 new로 생성됨)
     - 위 패턴이 발견되면 field_assignments에 기록
  
  
  [OUTPUT_FORMAT]
  JSON 형식으로만 결과를 반환:
  {
    "method_name": "메서드명",
    "return_type": "반환 타입 (void 포함)",
    "visibility": "public | private | protected | default",
    "is_static": true | false,
    "method_type": "getter | setter | constructor | normal",
    "parameters": [
      {
        "name": "파라미터명",
        "type": "파라미터 타입"
      }
    ],
    "dependencies": [
      {
        "target_class": "의존 대상 클래스명",
        "usage": "parameter | return"
      }
    ],
    "field_assignments": [
      {
        "field_name": "할당되는 필드명",
        "value_source": "parameter | new"
      }
    ]
  }
  
  출력 제약:
  - JSON만 출력 (코드펜스 금지)
  - parameters, dependencies, field_assignments가 없으면 빈 배열 반환
  - primitive/wrapper/String/void는 dependencies에 포함하지 않음


