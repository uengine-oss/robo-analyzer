name: "parent_context"
description: "부모 노드의 핵심 컨텍스트 추출"
version: "1.2"

input_schema:
  required: []
  optional: {}

prompt: |
  [ROLE]
  당신은 Java 코드 구조 분석 전문가입니다.
  주어진 코드 스켈레톤에서 자식 노드 분석에 필요한 핵심 키워드만 추출합니다.
  
  
  [LANGUAGE_SETTING]
  응답 언어: {{ locale }}
  
  
  [INPUT_DATA]
  {% if ancestor_context %}
  상위 컨텍스트:
  {{ ancestor_context }}
  
  {% endif %}
  분석 대상 코드 스켈레톤:
  {{ skeleton_code }}
  
  
  [EXTRACTION_FOCUS]
  스켈레톤에서 자식 노드 분석에 필요한 다음 핵심 정보를 반드시 추출하세요:
  
  1. 메서드/클래스 목적 및 타겟 (최우선)
     - 현재 블록이 속한 메서드/클래스의 목적
     - 메서드가 다루는 주요 객체/엔티티
     - 예: "주문 처리 메서드", "결제 검증 로직", "Order 객체 처리"
  
  2. 핵심 변수/객체명 및 역할
     - 조건에 사용되는 주요 변수명과 역할
     - 할당되거나 참조되는 핵심 식별자
     - 메서드 호출 대상 객체와 목적
     - 예: "order 변수에 주문 정보 저장", "payment 객체로 결제 처리"
  
  3. 조건 키워드 및 분기 목적
     - if/switch 등에 사용된 조건의 핵심 표현
     - 비교 연산, 상태 체크, 각 분기별 목적
     - 예: "결제 방식이 CARD일 때", "사용자가 인증된 경우"
  
  4. 반복/예외 구조 및 목적
     - for/while/try-catch 등의 구조와 목적
     - 반복 대상과 각 반복에서 수행하는 작업
     - 예외 처리 목적
     - 예: "상품 목록을 순회하며 가격 계산", "결제 실패 시 롤백"
  
  5. 구조 유형 및 목적
     - 블록의 종류 (조건문, 반복문, 예외처리, 동기화 등)
     - 무엇을 하려고 하는지 (예: "데이터 검증", "트랜잭션 처리", "조건 분기")
  
  
  [OUTPUT_FORMAT]
  JSON 형식으로 핵심 정보를 포함하여 요약:
  {
    "context_summary": "메서드/클래스 목적, 변수/객체 역할, 조건 키워드, 반복/예외 구조, 구조 유형 및 목적을 포함한 요약 (100단어 이내)"
  }
  
  예시:
  {
    "context_summary": "주문 결제 처리 메서드. order 객체에 주문 정보 저장. 조건: 결제 방식이 CARD면 카드 승인, BANK면 계좌이체. payment 객체로 결제 처리. 목적: 주문 상태를 CONFIRMED로 변경"
  }
  
  
  [CONSTRAINTS]
  - 반드시 JSON 형식
  - 코드펜스(```) 금지
  - 트레일링 콤마 금지
  - 자식 코드(...code..., ....) 내용은 추측 금지
  - ⚠️ 빈 문자열("") 반환 금지 - 최소한 구조 유형이라도 기술
  - ⚠️ 메서드/클래스 목적, 변수/객체 역할, 조건 키워드, 목적 정보 반드시 포함
  - ⚠️ 자식 노드가 문맥을 이해할 수 있도록 충분한 정보 제공

