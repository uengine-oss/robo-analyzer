name: "class_summary_only_prompt"
description: "클래스/인터페이스 전체 요약 생성 (Summary만)"
version: "1.0"

input_schema:
  required: []
  optional: {}

prompt: |
  [ROLE]
  당신은 Java 클래스/인터페이스의 구조, 책임, 비즈니스 로직을 분석하는 전문가입니다.
  멤버 분석 결과를 종합하여 클래스의 역할을 상세하게 설명하세요.
  
  
  [LANGUAGE_SETTING]
  응답 언어: {{ locale }}
  모든 분석 결과와 설명은 지정된 언어로 생성해야 합니다.
  
  
  [INPUT_DATA]
  멤버 분석 결과:
  {{ summaries }}
  
  {% if previous_summary %}
  이전 청크 분석 결과 (이어서 분석):
  {{ previous_summary }}
  {% endif %}
  
  
  ===============================================
  [TASK: 상세 요약 (DETAILED_SUMMARY)]
  ===============================================
  
  멤버 요약들을 종합하여 클래스 전체 역할을 상세하게 설명하세요.
  
  ★ 필수 포함 사항 (멤버 요약에서 반드시 추출):
  
  1. 핵심 책임 및 역할
     - 이 클래스/인터페이스가 담당하는 주요 책임
     - 시스템 아키텍처에서의 위치 (Controller, Service, Repository, Entity 등)
     - 공개 API(public 메서드)의 목적과 기능
     
     예시: "이 클래스는 OrderService로, 주문 생성, 조회, 취소 등 주문 관련 핵심 비즈니스 로직을 담당합니다.
           OrderController에서 호출되며, OrderRepository를 통해 데이터를 저장합니다."
  
  2. 주요 분기 조건과 비즈니스 규칙 (★ 매우 상세하게)
     - 모든 if, switch 문의 조건값과 각 분기별 처리 내용
     - 조건에 사용되는 실제 값(enum, 상수, 상태값)을 명시
     
     예시: "주문 상태(OrderStatus)에 따라 다르게 처리합니다:
           - PENDING: 결제 대기 상태로, 결제 프로세스 시작 가능
           - CONFIRMED: 확정된 주문으로, 배송 준비 시작
           - SHIPPED: 배송 중으로, 취소 불가능
           - DELIVERED: 배송 완료로, 반품 요청만 가능
           - CANCELLED: 취소된 주문으로, 재주문 안내
           
           회원 등급(MemberGrade)에 따른 할인율:
           - VIP: 15% 할인 (누적 구매 500만원 이상)
           - GOLD: 10% 할인 (누적 구매 200만원 이상)
           - SILVER: 5% 할인 (누적 구매 50만원 이상)
           - BRONZE: 3% 할인 (일반 회원)"
  
  3. 데이터 값 및 상수 (★ 코드에서 확인된 모든 값)
     - enum 값, 상태값, 설정값 등 모든 리터럴 값
     - 임계값, 한도, 설정 상수
     
     예시: "사용되는 주요 값:
           - OrderStatus enum: PENDING, CONFIRMED, SHIPPED, DELIVERED, CANCELLED
           - PaymentMethod enum: CREDIT_CARD, BANK_TRANSFER, CASH, POINT
           - 최소 주문 금액: MIN_ORDER_AMOUNT = 10,000원
           - 무료 배송 기준: FREE_SHIPPING_THRESHOLD = 50,000원
           - 최대 재시도 횟수: MAX_RETRY_COUNT = 3
           - API 타임아웃: TIMEOUT_SECONDS = 30"
  
  4. 협력 객체 및 의존성
     - 주입받는 서비스/컴포넌트와 그 역할
     - 호출하는 외부 API나 서비스
     
     예시: "의존성:
           - OrderRepository: 주문 데이터 영속화
           - PaymentService: 결제 처리 위임
           - InventoryService: 재고 확인 및 차감
           - NotificationService: 주문 알림 발송
           - PaymentGateway: 외부 결제사 API 호출"
  
  5. 예외 처리 및 검증 규칙
     - 입력 검증 규칙과 검증 실패 시 처리
     - 발생 가능한 예외와 처리 방식
     
     예시: "검증 및 예외 처리:
           - 주문 수량이 0 이하: InvalidOrderException('주문 수량은 1개 이상이어야 합니다')
           - 재고 부족: InsufficientStockException('상품 [상품명]의 재고가 부족합니다')
           - 결제 실패: PaymentFailedException(에러코드, 메시지)
           - 주문 미존재: OrderNotFoundException('주문번호 [주문번호]를 찾을 수 없습니다')"
  
  요약 작성 규칙:
  - 최소 10문장 이상으로 상세하게 작성
  - 멤버 요약에 있는 모든 중요 정보를 누락 없이 포함
  - 추상적 표현 금지, 구체적인 값과 조건 명시
  - 비즈니스 맥락이 명확하게 드러나도록 서술
  
  
  ===============================================
  [OUTPUT_FORMAT]
  ===============================================
  
  다음 JSON 형식으로만 결과를 반환하세요:
  
  {
    "summary": "최소 10문장 이상의 매우 상세한 클래스 요약. 모든 분기 조건, 데이터 값, 비즈니스 규칙, 협력 객체, 예외 처리를 포함"
  }
  
  출력 제약사항:
  - JSON 형식 외의 부가 설명이나 주석 금지
  - null 값 사용 금지
  - 코드펜스(```json ... ```) 포함 금지
  - **⚠️ CRITICAL: 트레일링 콤마(trailing comma) 절대 금지** - 배열이나 객체의 마지막 요소 뒤에 콤마(,)를 붙이지 마세요. 예: `"summary": "..."` (O), `"summary": "...",` (X)


