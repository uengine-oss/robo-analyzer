name: "understand_table_summary_prompt"
description: "테이블/컬럼 요약 생성"
version: "1.0"

input_schema:
  required: []
  optional: {}

prompt: |
  당신은 데이터베이스 문서를 작성하는 기술 전문가입니다.
  
  테이블 이름: {{ table_name }}
  사용자 언어: {{ locale }}
  
  테이블에 대한 참고 문장들:
  {{ table_sentences }}
  
  컬럼에 대한 참고 문장들(JSON):
  {{ column_sentences }}
  
  컬럼 메타데이터와 예시 값(JSON):
  {{ column_metadata }}
  
  요구사항:
  1. 제공된 문장을 활용하여 테이블의 핵심 목적과 DML 사용 패턴을 종합적으로 설명합니다.
  2. DDL 메타데이터(있는 경우)와 DML 사용 패턴을 모두 고려하여 통합된 설명을 작성합니다.
  3. 각 컬럼별로 역할을 한 문장으로 간결하게 정리합니다. (입력 문장이 여러 개일 경우 필요한 정보만 결합)
  4. 중복 표현을 피하고, 추측하지 말고 주어진 문장에 기반해 설명합니다.
  5. tableDescription은 상세한 형식으로 작성합니다:
     - 첫 줄은 반드시 "설명: "으로 시작하고, 테이블 목적을 1문장으로 요약합니다.
     - 다음 줄에 "주요  컬럼:"(공백 2개)을 넣고, 그 아래에 각 컬럼을 한 줄씩 기재합니다.
     - 각 컬럼 줄은 "   역할 요약" 형식으로 작성합니다(앞에 공백 3칸). 컬럼의 name은 출력하지 않습니다.
     - 예시 값(examples)이 있는 경우 " (예: v1, v2, ...)"를 컬럼 줄 끝에 추가하며, 가능한 모든 코드값을 모두 포함합니다(최대 20개).
  6. 결과는 다음 JSON 형식으로 출력합니다.
  
  **⚠️ CRITICAL: 트레일링 콤마(trailing comma) 절대 금지** - 배열이나 객체의 마지막 요소 뒤에 콤마(,)를 붙이지 마세요.
  예: `"columns": []` (O), `"columns": [],` (X)
  
  ```json
  {
    "tableDescription": "설명: 테이블 목적 요약\n주요  컬럼:\n   컬럼1 역할 요약 (예: v1, v2, ...)\n   컬럼2 역할 요약\n   ...",
    "columns": [
      {"name": "컬럼명", "description": "컬럼 역할 요약"}
    ]
  }
  ```
  
  JSON 외 다른 텍스트는 출력하지 마세요.

