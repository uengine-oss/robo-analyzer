# ROBO Analyzer

**ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Neo4j ê·¸ëž˜í”„ë¡œ ë³€í™˜í•˜ëŠ” AI ê¸°ë°˜ ì½”ë“œ ë¶„ì„ ì„œë¹„ìŠ¤**

ì´ í”„ë¡œì íŠ¸ëŠ” í´ë¦° ì•„í‚¤í…ì²˜ë¡œ ì „í™˜í•˜ê¸° ìœ„í•´ ë¨¼ì € ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ì´í•´í•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤. ë ˆê±°ì‹œ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ êµ¬ì¡°í™”ëœ ê·¸ëž˜í”„ ë°ì´í„°ë¡œ ë³€í™˜í•˜ê³ , ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì™€ ì˜ì¡´ì„±ì„ ì‹œê°í™”í•©ë‹ˆë‹¤.

---

## ðŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ë¶„ì„ íë¦„](#ë¶„ì„-íë¦„)
5. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
6. [ì‹œìž‘í•˜ê¸°](#ì‹œìž‘í•˜ê¸°)
7. [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
8. [ë¶„ì„ ì „ëžµ](#ë¶„ì„-ì „ëžµ)
9. [ê·¸ëž˜í”„ ë°ì´í„° êµ¬ì¡°](#ê·¸ëž˜í”„-ë°ì´í„°-êµ¬ì¡°)
10. [ì„¤ì •](#ì„¤ì •)
11. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
12. [ê¸°ìˆ  ì´ìŠˆ ë° í•´ê²°](./docs/TECHNICAL_ISSUES.md)

---

## ê°œìš”

ROBO AnalyzerëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Neo4j ê·¸ëž˜í”„ ë°ì´í„°ë² ì´ìŠ¤ì— êµ¬ì¡°í™”ëœ ì •ë³´ë¥¼ ì €ìž¥í•˜ëŠ” ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤. 

### í•µì‹¬ ëª©ì 

- **ë ˆê±°ì‹œ ì½”ë“œ ë¶„ì„**: ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ë¶„ì„í•˜ì—¬ êµ¬ì¡°ì™€ ì˜ì¡´ì„± íŒŒì•…
- **ê·¸ëž˜í”„ ê¸°ë°˜ ì‹œê°í™”**: Neo4jë¥¼ í™œìš©í•œ ì½”ë“œ êµ¬ì¡° ì‹œê°í™”
- **AI ê¸°ë°˜ ë¶„ì„**: LLMì„ í™œìš©í•œ ì½”ë“œ ìš”ì•½ ë° ê´€ê³„ ì¶”ì¶œ
- **í´ë¦° ì•„í‚¤í…ì²˜ ì „í™˜ ì¤€ë¹„**: ì½”ë“œ ë¶„ì„ì„ í†µí•œ ë¦¬íŒ©í† ë§ ê¸°ë°˜ ë§ˆë ¨

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

**"ëª¨ë“  íŒŒì¼ì— ëŒ€í•´ ASTë¥¼ ë¨¼ì € ë½‘ëŠ”ë‹¤"**

ì´ ì›ì¹™ì€ ëª¨ë“  ì„¤ê³„ì˜ í•µì‹¬ìž…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ëª¨ë“  íŒŒì¼ â†’ AST êµ¬ì¡° ë¨¼ì € ìƒì„± (Phase 1)                â”‚
â”‚  â†“                                                       â”‚
â”‚  ëª¨ë“  íŒŒì¼ â†’ LLM ë¶„ì„ (Phase 2)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì´ë ‡ê²Œ ì„¤ê³„í•œ ì´ìœ :**

1. **ë©”ì„œë“œ í˜¸ì¶œ ì²˜ë¦¬ ë‹¨ìˆœí™”**: AST êµ¬ì¡°ê°€ ìžˆìœ¼ë©´ `target.methodName`ì„ íŒŒì‹±í•´ì„œ ê¸°ì¡´ í´ëž˜ìŠ¤/ë©”ì„œë“œ ë…¸ë“œë¥¼ ë°”ë¡œ ì°¾ì„ ìˆ˜ ìžˆìŒ
2. **ë³‘ë ¬ ì²˜ë¦¬ íš¨ìœ¨ì„±**: ëª¨ë“  íŒŒì¼ì˜ ASTê°€ ë¨¼ì € ìžˆìœ¼ë©´, LLM ë¶„ì„ ë‹¨ê³„ì—ì„œ ê° íŒŒì¼ì„ ë…ë¦½ì ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥
3. **ê´€ê³„ ì—°ê²° ë‹¨ìˆœí™”**: `MATCH`ë¡œ ê¸°ì¡´ ë…¸ë“œë¥¼ ë°”ë¡œ ì¡°íšŒí•˜ì—¬ ê´€ê³„ ìƒì„±

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. Framework ë¶„ì„ (Java/Kotlin)

- **AST ê¸°ë°˜ êµ¬ì¡° ë¶„ì„**: í´ëž˜ìŠ¤, ì¸í„°íŽ˜ì´ìŠ¤, ë©”ì„œë“œ, í•„ë“œ ì¶”ì¶œ
- **ìƒì†/êµ¬í˜„ ê´€ê³„**: `EXTENDS`, `IMPLEMENTS` ê´€ê³„ ìƒì„±
- **ë©”ì„œë“œ í˜¸ì¶œ ì¶”ì **: `CALLS` ê´€ê³„ë¥¼ í†µí•œ ë©”ì„œë“œ í˜¸ì¶œ ì²´ì¸ ë¶„ì„
- **ì˜ì¡´ì„± ë¶„ì„**: `DEPENDENCY` ê´€ê³„ë¥¼ í†µí•œ íƒ€ìž… ì˜ì¡´ì„± íŒŒì•…
- **í´ëž˜ìŠ¤ ê´€ê³„**: `ASSOCIATION`, `COMPOSITION` ê´€ê³„ ì¶”ì¶œ

### 2. DBMS ë¶„ì„ (PL/SQL)

- **í”„ë¡œì‹œì €/í•¨ìˆ˜ ë¶„ì„**: PROCEDURE, FUNCTION, TRIGGER ë…¸ë“œ ìƒì„±
- **í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ë¶„ì„**: DDL íŒŒì¼ì—ì„œ í…Œì´ë¸”/ì»¬ëŸ¼ êµ¬ì¡° ì¶”ì¶œ
- **ë°ì´í„° ì ‘ê·¼ ì¶”ì **: `FROM`, `WRITES` ê´€ê³„ë¥¼ í†µí•œ í…Œì´ë¸” ì ‘ê·¼ ë¶„ì„
- **í”„ë¡œì‹œì € í˜¸ì¶œ ì²´ì¸**: `CALL` ê´€ê³„ë¥¼ í†µí•œ í”„ë¡œì‹œì € í˜¸ì¶œ ì¶”ì 
- **ì™¸ëž˜í‚¤ ê´€ê³„**: `FK_TO_TABLE` ê´€ê³„ë¥¼ í†µí•œ í…Œì´ë¸” ê´€ê³„ íŒŒì•…
- **ì»¨í…ìŠ¤íŠ¸ ì¸ì‹ ë¶„ì„**: ì¤‘ì²©ëœ DML êµ¬ì¡°ì—ì„œ ë³„ì¹­ ì˜¤ì¸ ë°©ì§€ ë° ë¬¸ë§¥ ìœ ì§€
  - ë¶€ëª¨ ë…¸ë“œì˜ ì»¨í…ìŠ¤íŠ¸(ë³„ì¹­ ë§¤í•‘, DML ìœ í˜•, ì¡°ì¸ ì¡°ê±´)ë¥¼ ìžì‹ ë…¸ë“œì— ì „ë‹¬
  - ë³„ì¹­ì„ ì‹¤ì œ í…Œì´ë¸”ëª…ìœ¼ë¡œ ì˜¤ì¸í•˜ì§€ ì•Šë„ë¡ ì •í™•í•œ í…Œì´ë¸”ëª…ë§Œ ì¶”ì¶œ

### 3. ë³‘ë ¬ ì²˜ë¦¬ ë° ì˜ì¡´ì„± ê´€ë¦¬

- **íŒŒì¼ ë ˆë²¨ ë³‘ë ¬**: Phase 1/Phase 2ì—ì„œ ìµœëŒ€ 5ê°œ íŒŒì¼ ë™ì‹œ ì²˜ë¦¬
- **ë°°ì¹˜ ë ˆë²¨ ë³‘ë ¬**: LLM ë¶„ì„ ì‹œ ë°°ì¹˜ ë‹¨ìœ„ ë³‘ë ¬ ì²˜ë¦¬
- **ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥**: `completion_event` ê¸°ë°˜ìœ¼ë¡œ ë¶€ëª¨ ë…¸ë“œëŠ” ìžì‹ ì™„ë£Œ í›„ ì‹¤í–‰
- **ì„±ê³µ/í’ˆì§ˆ ì¶”ì **: `node.ok` í”Œëž˜ê·¸ë¡œ ë¶ˆì™„ì „ ìš”ì•½ ì „íŒŒ ë°©ì§€
- **Cypher ë™ì‹œì„± ë³´í˜¸**: `asyncio.Lock`ì„ í†µí•œ Neo4j ì¿¼ë¦¬ ë™ì‹œì„± ì œì–´

### 4. Fail-Fast ì˜¤ë¥˜ ì²˜ë¦¬

- **ì¦‰ì‹œ ì¤‘ë‹¨ ì›ì¹™**: ë¶„ì„ ì¤‘ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨ (ì¡°ìš©í•œ ì‹¤íŒ¨/ë¶€ë¶„ ì‹¤íŒ¨ ë¶ˆí—ˆ)
- **ì˜ˆì™¸ ì „íŒŒ**: ëª¨ë“  ì˜ˆì™¸ëŠ” `AnalysisError`ë¡œ ëž˜í•‘ë˜ì–´ ìƒìœ„ë¡œ ì „íŒŒ
- **íƒ€ìž… ê²€ì¦**: `validate_dict_result()` ìœ í‹¸ë¦¬í‹°ë¡œ LLM ê²°ê³¼ íƒ€ìž… ê²€ì¦
- **í† í° ë‚­ë¹„ ë°©ì§€**: ì¤‘ê°„ ì‹¤íŒ¨ ì‹œ ì¶”ê°€ LLM í˜¸ì¶œ ì—†ì´ ì¦‰ì‹œ ì¢…ë£Œ

**ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´:**

```python
# âŒ ìž˜ëª»ëœ íŒ¨í„´ (ì¡°ìš©í•œ ì‹¤íŒ¨)
except Exception as e:
    log_process("ANALYZE", "ERROR", f"ì˜¤ë¥˜: {e}", logging.WARNING)
    # ê³„ì† ì§„í–‰... (í† í° ë‚­ë¹„)

# âœ… ì˜¬ë°”ë¥¸ íŒ¨í„´ (Fail-Fast)
except Exception as e:
    log_process("ANALYZE", "ERROR", f"ì˜¤ë¥˜: {e}", logging.ERROR)
    raise  # ì¦‰ì‹œ ì¤‘ë‹¨
```

**LLM ê²°ê³¼ ê²€ì¦:**

```python
# dict íƒ€ìž…ì´ ì•„ë‹ˆë©´ ì¦‰ì‹œ AnalysisError ë°œìƒ
validated = self.validate_dict_result(llm_result, "ì²­í¬ ë¶„ì„", batch_id)
summary = validated.get('summary', '')
```

### 5. ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°

- **NDJSON í˜•ì‹**: ì‹¤ì‹œê°„ ë¶„ì„ ì§„í–‰ ìƒí™© ì „ë‹¬
- **ì´ë²¤íŠ¸ íƒ€ìž…**: `message`, `data`, `error`, `complete`
- **ì§„í–‰ë¥  ì¶”ì **: íŒŒì¼ë³„, ì „ì²´ ë¶„ì„ ì§„í–‰ë¥  í‘œì‹œ

### 6. User Story ìžë™ ìƒì„±

- **ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ ìƒì„±**: ë¶„ì„ ê²°ê³¼ì—ì„œ User Story ë° Acceptance Criteria ìžë™ ìƒì„±
- **í¬ê´„ì  ë„ì¶œ**: ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(CRUD, ë°°ì¹˜, ì§‘ê³„ ë“±)ì—ì„œ User Story ë„ì¶œ
- **ë¶ˆì™„ì „ ìŠ¤í‚µ**: í•˜ìœ„ ë¶„ì„ ì‹¤íŒ¨ ì‹œ ìµœì¢… Summary/UserStory ìƒì„± ìŠ¤í‚µ
- **ë§ˆí¬ë‹¤ìš´ í˜•ì‹**: êµ¬ì¡°í™”ëœ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ ìƒì„±

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ëž¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client (Frontend)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/NDJSON Stream
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Application                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              API Router (router.py)                  â”‚   â”‚
â”‚  â”‚  - POST /robo/analyze/                               â”‚   â”‚
â”‚  â”‚  - DELETE /robo/data/                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Analysis Orchestrator (orchestrator.py)          â”‚   â”‚
â”‚  â”‚  - ìš”ì²­ íŒŒì‹± ë° ê²€ì¦                                   â”‚   â”‚
â”‚  â”‚  - íŒŒì¼ íƒìƒ‰                                          â”‚   â”‚
â”‚  â”‚  - ë¶„ì„ ì „ëžµ ì„ íƒ                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Analyzer Strategy Layer                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Framework Analyzer   â”‚  â”‚   DBMS Analyzer      â”‚        â”‚
â”‚  â”‚  (Java/Kotlin)       â”‚  â”‚   (PL/SQL)           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚             â”‚                          â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  AST Processor       â”‚  â”‚  AST Processor        â”‚        â”‚
â”‚  â”‚  - Phase 1: AST      â”‚  â”‚  - Phase 1: AST       â”‚        â”‚
â”‚  â”‚  - Phase 2: LLM     â”‚  â”‚  - Phase 2: LLM       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Core Services                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Neo4j Client   â”‚  â”‚   LLM Client     â”‚                 â”‚
â”‚  â”‚  - Graph Query  â”‚  â”‚   - OpenAI API   â”‚                 â”‚
â”‚  â”‚  - Lock Control â”‚  â”‚   - Custom LLM   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Neo4j Database     â”‚    â”‚   LLM API Service    â”‚
â”‚   (Graph Storage)    â”‚    â”‚   (AI Analysis)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë ˆì´ì–´ êµ¬ì¡°

1. **API Layer** (`api/`)
   - FastAPI ê¸°ë°˜ REST API
   - ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
   - ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ê´€ë¦¬

2. **Orchestration Layer** (`api/orchestrator.py`)
   - ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
   - íŒŒì¼ íƒìƒ‰ ë° ê²€ì¦
   - ì „ëžµ ì„ íƒ ë° ì‹¤í–‰

3. **Analysis Layer** (`analyzer/strategy/`)
   - **BaseStreamingAnalyzer**: ê³µí†µ ë¶„ì„ í”„ë ˆìž„ (í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´)
     - Neo4j ì´ˆê¸°í™” ë° ì œì•½ì¡°ê±´ ë³´ìž¥
     - ì¦ë¶„/ì‹ ê·œ ëª¨ë“œ íŒë‹¨
     - ê³µí†µ ìŠ¤íŠ¸ë¦¬ë° ë©”ì‹œì§€
     - User Story ìƒì„± (ê³µí†µ í¬ë§·)
     - ì™„ë£Œ í†µê³„ ë° ì˜ˆì™¸ ì²˜ë¦¬
   - **FrameworkAnalyzer / DbmsAnalyzer**: ì „ëžµë³„ êµ¬í˜„
     - Phase 1: ëª¨ë“  íŒŒì¼ AST ê·¸ëž˜í”„ ìƒì„± (ë³‘ë ¬)
     - Phase 1.5: ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ìƒì„± (DBMSë§Œ, Top-down)
     - Phase 2: ëª¨ë“  íŒŒì¼ LLM ë¶„ì„ (ë³‘ë ¬, ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥)
     - Phase 3: User Story ë¬¸ì„œ ìƒì„±
   - **AST Processor**: AST ì²˜ë¦¬ ë° ì¿¼ë¦¬ ìƒì„±
     - `build_static_graph_queries()`: Phase 1 ì¿¼ë¦¬ ìƒì„±
     - `_generate_parent_contexts()`: Phase 1.5 ì»¨í…ìŠ¤íŠ¸ ìƒì„± (DBMSë§Œ)
     - `run_llm_analysis()`: Phase 2 LLM ë¶„ì„ (ë°°ì¹˜ ì²˜ë¦¬, ì˜ì¡´ì„± ë³´ìž¥, ì»¨í…ìŠ¤íŠ¸ í™œìš©)

4. **Service Layer** (`analyzer/`, `util/`)
   - Neo4j í´ë¼ì´ì–¸íŠ¸
   - LLM í´ë¼ì´ì–¸íŠ¸
   - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

5. **Configuration Layer** (`config/`)
   - í™˜ê²½ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬
   - ì„¤ì • ì‹±ê¸€í†¤

---

## ë¶„ì„ íë¦„

### ðŸ”„ ì „ì²´ ë¶„ì„ ë‹¨ê³„ (í•œëˆˆì— ë³´ê¸°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì „ì²´ ë¶„ì„ íŒŒì´í”„ë¼ì¸                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 0: DDL ì²˜ë¦¬ (DBMSë§Œ)                                                   â”‚
â”‚   â€¢ DDL íŒŒì¼ íŒŒì‹± (CREATE TABLE ë¬¸)                                          â”‚
â”‚   â€¢ Table, Column ë…¸ë“œ ìƒì„±                                                  â”‚
â”‚   â€¢ FK_TO_TABLE ê´€ê³„ ìƒì„±                                                    â”‚
â”‚                                                                              â”‚
â”‚   ë¡œê·¸ ì˜ˆì‹œ:                                                                 â”‚
â”‚   INFO: [DDL_PARSER] ì •ê·œì‹ íŒŒì‹± ì™„ë£Œ: 387ê°œ í…Œì´ë¸”                          â”‚
â”‚   INFO: [ANALYZE:DDL] DDL ì²˜ë¦¬ ì™„ë£Œ (T:387, C:3379, FK:0)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 1: AST êµ¬ì¡° ê·¸ëž˜í”„ ìƒì„±                                                â”‚
â”‚   â€¢ ëª¨ë“  íŒŒì¼ AST íŒŒì‹± (JSON ë¡œë“œ)                                           â”‚
â”‚   â€¢ ë…¸ë“œ ìˆ˜ì§‘ (PROCEDURE, FUNCTION, SELECT, IF ë“±)                           â”‚
â”‚   â€¢ ì •ì  ê·¸ëž˜í”„ ìƒì„± â†’ Neo4j ì €ìž¥                                            â”‚
â”‚   â€¢ âš¡ íŒŒì¼ ë‹¨ìœ„ ë³‘ë ¬ ì²˜ë¦¬ (ìµœëŒ€ 5ê°œ)                                         â”‚
â”‚                                                                              â”‚
â”‚   ë¡œê·¸ ì˜ˆì‹œ:                                                                 â”‚
â”‚   INFO: [ANALYZE:PHASE1] ðŸ—ï¸ RWIS/FN_CALC.sql ì •ì  ê·¸ëž˜í”„ ìƒì„±               â”‚
â”‚   INFO: [ANALYZE:COLLECT] âœ… FUNCTION ë…¸ë“œ ìˆ˜ì§‘ ì™„ë£Œ: ë¼ì¸ 1~55              â”‚
â”‚   INFO: [ANALYZE:COLLECT] âœ… SELECT ë…¸ë“œ ìˆ˜ì§‘ ì™„ë£Œ: ë¼ì¸ 10~15               â”‚
â”‚   INFO: [ANALYZE:PHASE1] âœ… RWIS/FN_CALC.sql: 30ê°œ ì¿¼ë¦¬ ìƒì„±                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 1.5: ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ìƒì„± (DBMSë§Œ)                                       â”‚
â”‚   â€¢ Top-down ë°©ì‹ìœ¼ë¡œ ë¶€ëª¨ ë…¸ë“œ ì»¨í…ìŠ¤íŠ¸ ìƒì„±                                 â”‚
â”‚   â€¢ ë³„ì¹­ ë§¤í•‘, DML ìœ í˜•, ì¡°ì¸ ì¡°ê±´ ì¶”ì¶œ                                      â”‚
â”‚   â€¢ ìŠ¤ì¼ˆë ˆí†¤ ì½”ë“œ ìƒì„± (í† í° ìµœì í™”)                                         â”‚
â”‚   â€¢ ì´ ì»¨í…ìŠ¤íŠ¸ë¥¼ Phase 2ì—ì„œ í™œìš©í•˜ì—¬ ë³„ì¹­ ì˜¤ì¸ ë°©ì§€                        â”‚
â”‚                                                                              â”‚
â”‚   ë¡œê·¸ ì˜ˆì‹œ:                                                                 â”‚
â”‚   INFO: [ANALYZE:CONTEXT] ðŸ”„ ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì‹œìž‘: 6ê°œ ë…¸ë“œ               â”‚
â”‚   INFO: [ANALYZE:CONTEXT] âœ… ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ: MERGE[106~144]              â”‚
â”‚   INFO: [ANALYZE:CONTEXT] âœ… ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ: TRY[50~146]                 â”‚
â”‚   INFO: [ANALYZE:CONTEXT] âœ… ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì™„ë£Œ: 6ê°œ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 2: LLM ë¶„ì„                                                            â”‚
â”‚                                                                              â”‚
â”‚   2-1. ë°°ì¹˜ ê³„íš                                                             â”‚
â”‚        â€¢ í† í° ì œí•œ ê¸°ë°˜ ë°°ì¹˜ ë¶„í•                                              â”‚
â”‚        â€¢ ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ìˆœì„œ ê²°ì •                                           â”‚
â”‚                                                                              â”‚
â”‚        ë¡œê·¸ ì˜ˆì‹œ:                                                            â”‚
â”‚        INFO: [ANALYZE:BATCH] ðŸ“¦ ë°°ì¹˜ #1 í™•ì •: ë¦¬í”„ ë…¸ë“œ 4ê°œ (í† í° 359/1000)  â”‚
â”‚        INFO: [ANALYZE:BATCH] ðŸ“¦ ë°°ì¹˜ #2 í™•ì •: ë¶€ëª¨ ë…¸ë“œ ë‹¨ë… (í† í° 223)      â”‚
â”‚        INFO: [ANALYZE:PHASE2] ðŸ“Š ë°°ì¹˜ 12ê°œ (ì˜ì¡´ì„± ë³´ìž¥)                     â”‚
â”‚                                                                              â”‚
â”‚   2-2. LLM í˜¸ì¶œ (ë°°ì¹˜ë³„ ë³‘ë ¬)                                                â”‚
â”‚        â€¢ ë¦¬í”„ ë…¸ë“œ ë¨¼ì € â†’ ë¶€ëª¨ ë…¸ë“œ ìˆœì„œ                                      â”‚
â”‚        â€¢ summary, table ë§¤ì¹­, ê´€ê³„ ì¶”ì¶œ                                      â”‚
â”‚        â€¢ âš¡ ë°°ì¹˜ ë‹¨ìœ„ ë³‘ë ¬ ì²˜ë¦¬                                               â”‚
â”‚                                                                              â”‚
â”‚        ë¡œê·¸ ì˜ˆì‹œ:                                                            â”‚
â”‚        INFO: [ANALYZE:LLM] ë°°ì¹˜ #1 ì²˜ë¦¬ ì¤‘ (4ê°œ ë…¸ë“œ)                        â”‚
â”‚        INFO: [ANALYZE:LLM] ë°°ì¹˜ #3 ì²˜ë¦¬ ì¤‘ (1ê°œ ë…¸ë“œ)                        â”‚
â”‚        INFO: HTTP Request: POST https://api.openai.com/v1/...                â”‚
â”‚                                                                              â”‚
â”‚   2-3. ê²°ê³¼ ì €ìž¥                                                             â”‚
â”‚        â€¢ summary, FROM, WRITES, CALL ê´€ê³„ ì—…ë°ì´íŠ¸                           â”‚
â”‚        â€¢ Neo4j ì €ìž¥                                                          â”‚
â”‚                                                                              â”‚
â”‚        ë¡œê·¸ ì˜ˆì‹œ:                                                            â”‚
â”‚        INFO: [ANALYZE:SUMMARY] âœ… FN_EDIT_YN: summary í†µí•© ì™„ë£Œ              â”‚
â”‚        INFO: [ANALYZE:PHASE2] âœ… RWIS/FN_EDIT_YN.sql: 220ê°œ ì—…ë°ì´íŠ¸ ì¿¼ë¦¬    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 3: User Story ìƒì„±                                                     â”‚
â”‚   â€¢ ë¶„ì„ëœ summaryì—ì„œ User Story ì¶”ì¶œ                                       â”‚
â”‚   â€¢ Acceptance Criteria ìƒì„±                                                 â”‚
â”‚   â€¢ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ ìƒì„±                                                       â”‚
â”‚                                                                              â”‚
â”‚   ë¡œê·¸ ì˜ˆì‹œ:                                                                 â”‚
â”‚   INFO: [ANALYZE:SUMMARY] âœ… FN_EDIT_YN: User Story 2ê°œ ìƒì„±                 â”‚
â”‚   INFO: [ANALYZE:TABLE_SUMMARY] ðŸ“Š í…Œì´ë¸” ìš”ì•½ ì‹œìž‘: 4ê°œ í…Œì´ë¸”              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ðŸ“Š ë³‘ë ¬ ì²˜ë¦¬ êµ¬ì¡°

```
                           íŒŒì¼ 1         íŒŒì¼ 2         íŒŒì¼ 3         íŒŒì¼ 4
                             â”‚              â”‚              â”‚              â”‚
Phase 1 (AST)        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ AST ìƒì„±      â”‚ AST ìƒì„±    â”‚ AST ìƒì„±    â”‚ AST ìƒì„±      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                   âš¡ 5ê°œ íŒŒì¼ ë³‘ë ¬
                                            â†“
Phase 1.5 (Context)  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
(DBMSë§Œ)             â”‚ ì»¨í…ìŠ¤íŠ¸ ìƒì„± â”‚ ì»¨í…ìŠ¤íŠ¸    â”‚ ì»¨í…ìŠ¤íŠ¸    â”‚ ì»¨í…ìŠ¤íŠ¸      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                   âš¡ 5ê°œ íŒŒì¼ ë³‘ë ¬
                                            â†“
Phase 2 (LLM)        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ ë°°ì¹˜ #1~#5    â”‚ ë°°ì¹˜ #1~#3  â”‚ ë°°ì¹˜ #1~#8  â”‚ ë°°ì¹˜ #1~#4    â”‚
                     â”‚ âš¡ ë°°ì¹˜ ë³‘ë ¬   â”‚ âš¡ ë°°ì¹˜ ë³‘ë ¬ â”‚ âš¡ ë°°ì¹˜ ë³‘ë ¬ â”‚ âš¡ ë°°ì¹˜ ë³‘ë ¬   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                   âš¡ 5ê°œ íŒŒì¼ ë³‘ë ¬
                                            â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   Neo4j ì €ìž¥ (ìˆœì°¨)      â”‚
                              â”‚   ë‹¨ì¼ íŠ¸ëžœìž­ì…˜ ë³´ìž¥     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ðŸ”— Phase 2 ë‚´ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬

```
          ìžì‹ ë…¸ë“œ (ë¦¬í”„)              ë¶€ëª¨ ë…¸ë“œ
               â”‚                          â”‚
               â–¼                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
        â”‚ ë°°ì¹˜ #1     â”‚ â†â”€â”€ ë¦¬í”„ ë¨¼ì €     â”‚
        â”‚ (SELECT Ã—4) â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
               â”‚ completion_event         â”‚
               â–¼                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ë°°ì¹˜ #2     â”‚           â”‚ ë°°ì¹˜ #6     â”‚ â†â”€â”€ ìžì‹ ì™„ë£Œ í›„ ì‹¤í–‰
        â”‚ (UNION_ALL) â”‚           â”‚ (MERGE)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚ completion_event         â”‚ completion_event
               â–¼                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ìµœìƒìœ„ ë…¸ë“œ (FUNCTION/PROCEDURE)         â”‚
        â”‚ ëª¨ë“  ìžì‹ summary í†µí•©                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì „ì²´ ë¶„ì„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨

```
Client                    API Router          Orchestrator         Analyzer          Neo4j Client        LLM Client
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚â”€â”€ POST /robo/analyze/ â”€â”€â”€â”€>â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚â”€â”€ create_orch() â”€â”€>â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚<â”€â”€ orchestrator â”€â”€â”€â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚â”€â”€ discover_files() â”€>â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚<â”€â”€ file_names â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚â”€â”€ run_analysis() â”€â”€>â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚â”€â”€ analyze() â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ ensure_constraints() â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚<â”€â”€ OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ Phase 1: AST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ message: "Phase 1 ì‹œìž‘" â”€â”€â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ build_static_graph() â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚<â”€â”€ queries â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ run_graph_query() â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ data: graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚<â”€â”€ graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ Phase 2: LLM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ message: "Phase 2 ì‹œìž‘" â”€â”€â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ run_llm_analysis() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚<â”€â”€ analysis_result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ build_queries() â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ run_graph_query() â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ data: graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚<â”€â”€ graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ Phase 3: User Story â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ data: user_story â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚<â”€â”€ document â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚<â”€â”€ complete â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ complete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚                  â”‚                  â”‚
```

### Framework ë¶„ì„ ìƒì„¸ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì†ŒìŠ¤ íŒŒì¼ ëª©ë¡                               â”‚
â”‚  - OrderService.java                                            â”‚
â”‚  - OrderRepository.java                                         â”‚
â”‚  - OrderController.java                                         â”‚
â”‚  ... (ì´ Nê°œ íŒŒì¼)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ (íŒŒì¼ 5ê°œ ë³‘ë ¬ ì²˜ë¦¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ...    â”‚
â”‚  â”‚  File 1      â”‚  â”‚  File 2      â”‚  â”‚  File 3      â”‚         â”‚
â”‚  â”‚  AST ë¡œë“œ    â”‚  â”‚  AST ë¡œë“œ    â”‚  â”‚  AST ë¡œë“œ    â”‚         â”‚
â”‚  â”‚  (JSON)      â”‚  â”‚  (JSON)      â”‚  â”‚  (JSON)      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 1)       â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ì •ì ê·¸ëž˜í”„   â”‚  â”‚ ì •ì ê·¸ëž˜í”„    â”‚  â”‚ ì •ì ê·¸ëž˜í”„    â”‚        â”‚
â”‚  â”‚  ë…¸ë“œìƒì„±    â”‚  â”‚  ë…¸ë“œìƒì„±     â”‚  â”‚  ë…¸ë“œìƒì„±     â”‚        â”‚
â”‚  â”‚  - CLASS     â”‚  â”‚  - CLASS      â”‚  â”‚  - CLASS      â”‚        â”‚
â”‚  â”‚  - METHOD    â”‚  â”‚  - METHOD     â”‚  â”‚  - METHOD     â”‚        â”‚
â”‚  â”‚  - FIELD     â”‚  â”‚  - FIELD      â”‚  â”‚  - FIELD      â”‚        â”‚
â”‚  â”‚  - ê´€ê³„      â”‚  â”‚  - ê´€ê³„       â”‚  â”‚  - ê´€ê³„       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 2)       â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ LLM ë¶„ì„    â”‚  â”‚ LLM ë¶„ì„     â”‚  â”‚ LLM ë¶„ì„     â”‚        â”‚
â”‚  â”‚ (ì²­í¬ë³„)    â”‚  â”‚ (ì²­í¬ë³„)     â”‚  â”‚ (ì²­í¬ë³„)     â”‚        â”‚
â”‚  â”‚  - summary  â”‚  â”‚  - summary   â”‚  â”‚  - summary   â”‚        â”‚
â”‚  â”‚  - CALLS    â”‚  â”‚  - CALLS     â”‚  â”‚  - CALLS     â”‚        â”‚
â”‚  â”‚  - DEPEND   â”‚  â”‚  - DEPEND    â”‚  â”‚  - DEPEND    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ (Cypher Lock ë³´í˜¸)
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚         Neo4j ê·¸ëž˜í”„ ì €ìž¥         â”‚
                      â”‚  - ë…¸ë“œ ìƒì„±/ì—…ë°ì´íŠ¸             â”‚
                      â”‚  - ê´€ê³„ ìƒì„±                      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚      User Story ë¬¸ì„œ ìƒì„±        â”‚
                      â”‚  - í´ëž˜ìŠ¤ë³„ ìš”ì•½                  â”‚
                      â”‚  - User Story ì¶”ì¶œ               â”‚
                      â”‚  - Acceptance Criteria ìƒì„±      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DBMS ë¶„ì„ ìƒì„¸ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DDL íŒŒì¼ ì²˜ë¦¬ (Phase 0)                      â”‚
â”‚  - schema.sql                                                  â”‚
â”‚  - tables.sql                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í…Œì´ë¸”/ì»¬ëŸ¼ ë…¸ë“œ ìƒì„±                        â”‚
â”‚  - Table ë…¸ë“œ                                                  â”‚
â”‚  - Column ë…¸ë“œ                                                 â”‚
â”‚  - FK_TO_TABLE ê´€ê³„                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì†ŒìŠ¤ íŒŒì¼ ëª©ë¡                               â”‚
â”‚  - procedure1.sql                                              â”‚
â”‚  - procedure2.sql                                              â”‚
â”‚  ... (ì´ Nê°œ íŒŒì¼)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ (íŒŒì¼ 5ê°œ ë³‘ë ¬ ì²˜ë¦¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ...    â”‚
â”‚  â”‚  File 1      â”‚  â”‚  File 2      â”‚  â”‚  File 3      â”‚         â”‚
â”‚  â”‚  AST ë¡œë“œ    â”‚  â”‚  AST ë¡œë“œ    â”‚  â”‚  AST ë¡œë“œ    â”‚         â”‚
â”‚  â”‚  (JSON)      â”‚  â”‚  (JSON)      â”‚  â”‚  (JSON)      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 1)       â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ì •ì ê·¸ëž˜í”„   â”‚  â”‚ ì •ì ê·¸ëž˜í”„    â”‚  â”‚ ì •ì ê·¸ëž˜í”„    â”‚        â”‚
â”‚  â”‚  ë…¸ë“œìƒì„±    â”‚  â”‚  ë…¸ë“œìƒì„±     â”‚  â”‚  ë…¸ë“œìƒì„±     â”‚        â”‚
â”‚  â”‚  - PROCEDUREâ”‚  â”‚  - PROCEDURE â”‚  â”‚  - PROCEDURE â”‚        â”‚
â”‚  â”‚  - FUNCTION â”‚  â”‚  - FUNCTION  â”‚  â”‚  - FUNCTION  â”‚        â”‚
â”‚  â”‚  - Variable â”‚  â”‚  - Variable  â”‚  â”‚  - Variable  â”‚        â”‚
â”‚  â”‚  - ê´€ê³„      â”‚  â”‚  - ê´€ê³„       â”‚  â”‚  - ê´€ê³„       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 1.5)     â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸â”‚  â”‚ ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸â”‚  â”‚ ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸â”‚        â”‚
â”‚  â”‚  ìƒì„±        â”‚  â”‚  ìƒì„±        â”‚  â”‚  ìƒì„±        â”‚        â”‚
â”‚  â”‚  (Top-down)  â”‚  â”‚  (Top-down)  â”‚  â”‚  (Top-down)  â”‚        â”‚
â”‚  â”‚  - ë³„ì¹­ ë§¤í•‘ â”‚  â”‚  - ë³„ì¹­ ë§¤í•‘ â”‚  â”‚  - ë³„ì¹­ ë§¤í•‘ â”‚        â”‚
â”‚  â”‚  - DML ìœ í˜•  â”‚  â”‚  - DML ìœ í˜•  â”‚  â”‚  - DML ìœ í˜•  â”‚        â”‚
â”‚  â”‚  - ì¡°ì¸ ì¡°ê±´ â”‚  â”‚  - ì¡°ì¸ ì¡°ê±´ â”‚  â”‚  - ì¡°ì¸ ì¡°ê±´ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 2)       â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ LLM ë¶„ì„    â”‚  â”‚ LLM ë¶„ì„     â”‚  â”‚ LLM ë¶„ì„     â”‚        â”‚
â”‚  â”‚ (ë°°ì¹˜ë³„)    â”‚  â”‚ (ë°°ì¹˜ë³„)     â”‚  â”‚ (ë°°ì¹˜ë³„)     â”‚        â”‚
â”‚  â”‚  - summary  â”‚  â”‚  - summary   â”‚  â”‚  - summary   â”‚        â”‚
â”‚  â”‚  - CALL     â”‚  â”‚  - CALL      â”‚  â”‚  - CALL      â”‚        â”‚
â”‚  â”‚  - FROM     â”‚  â”‚  - FROM      â”‚  â”‚  - FROM      â”‚        â”‚
â”‚  â”‚  - WRITES   â”‚  â”‚  - WRITES    â”‚  â”‚  - WRITES    â”‚        â”‚
â”‚  â”‚  (ì»¨í…ìŠ¤íŠ¸  â”‚  â”‚  (ì»¨í…ìŠ¤íŠ¸   â”‚  â”‚  (ì»¨í…ìŠ¤íŠ¸   â”‚        â”‚
â”‚  â”‚   í™œìš©)     â”‚  â”‚   í™œìš©)      â”‚  â”‚   í™œìš©)      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ (Cypher Lock ë³´í˜¸)
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚         Neo4j ê·¸ëž˜í”„ ì €ìž¥         â”‚
                      â”‚  - ë…¸ë“œ ìƒì„±/ì—…ë°ì´íŠ¸             â”‚
                      â”‚  - ê´€ê³„ ìƒì„±                      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚      User Story ë¬¸ì„œ ìƒì„±        â”‚
                      â”‚  - í”„ë¡œì‹œì €ë³„ ìš”ì•½                â”‚
                      â”‚  - User Story ì¶”ì¶œ               â”‚
                      â”‚  - Acceptance Criteria ìƒì„±      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
robo_analyzer_core/
â”œâ”€â”€ main.py                      # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ìž…ì 
â”‚
â”œâ”€â”€ api/                         # REST API ë ˆì´ì–´
â”‚   â”œâ”€â”€ router.py               # API ë¼ìš°í„° ì •ì˜
â”‚   â”‚   â”œâ”€â”€ POST /robo/analyze/ # ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ (ìŠ¤íŠ¸ë¦¬ë°)
â”‚   â”‚   â””â”€â”€ DELETE /robo/data/  # ì‚¬ìš©ìž ë°ì´í„° ì‚­ì œ
â”‚   â””â”€â”€ orchestrator.py         # ë¶„ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚       â”œâ”€â”€ AnalysisOrchestrator # ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
â”‚       â”œâ”€â”€ discover_source_files() # ì†ŒìŠ¤ íŒŒì¼ íƒìƒ‰
â”‚       â””â”€â”€ cleanup_all_data()  # ë°ì´í„° ì •ë¦¬
â”‚
â”œâ”€â”€ analyzer/                    # ë¶„ì„ ì—”ì§„ ì½”ì–´
â”‚   â”œâ”€â”€ neo4j_client.py         # Neo4j ë¹„ë™ê¸° í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ execute_queries()  # Cypher ì¿¼ë¦¬ ì‹¤í–‰
â”‚   â”‚   â”œâ”€â”€ run_graph_query()  # ê·¸ëž˜í”„ ê²°ê³¼ ë°˜í™˜
â”‚   â”‚   â””â”€â”€ ensure_constraints() # ì œì•½ì¡°ê±´ ìƒì„±
â”‚   â”‚
â”‚   â””â”€â”€ strategy/               # ë¶„ì„ ì „ëžµ íŒ¨í„´
â”‚       â”œâ”€â”€ base/               # ê³µí†µ ê¸°ë°˜ í´ëž˜ìŠ¤
â”‚       â”‚   â”œâ”€â”€ processor.py   # AstProcessor (ê³µí†µ ì²˜ë¦¬ ë¡œì§)
â”‚       â”‚   â”‚   â”œâ”€â”€ validate_dict_result() # LLM ê²°ê³¼ íƒ€ìž… ê²€ì¦ (Fail-Fast)
â”‚       â”‚   â”‚   â”œâ”€â”€ run_llm_analysis()   # LLM ë¶„ì„ ì‹¤í–‰
â”‚       â”‚   â”‚   â””â”€â”€ _apply_summary_to_nodes() # ìš”ì•½ ì ìš©
â”‚       â”‚   â””â”€â”€ statement_node.py # StatementNode í´ëž˜ìŠ¤
â”‚       â”‚
â”‚       â”œâ”€â”€ base_analyzer.py    # BaseStreamingAnalyzer (ê³µí†µ í”„ë ˆìž„)
â”‚       â”‚   â”œâ”€â”€ analyze()       # í…œí”Œë¦¿ ë©”ì„œë“œ (ê³µí†µ íë¦„)
â”‚       â”‚   â”œâ”€â”€ run_pipeline() # ì „ëžµë³„ íŒŒì´í”„ë¼ì¸ (ì¶”ìƒ ë©”ì„œë“œ)
â”‚       â”‚   â””â”€â”€ build_user_story_doc() # User Story ìƒì„± (ê³µí†µ)
â”‚       â”œâ”€â”€ analyzer_factory.py # ì „ëžµ íŒ©í† ë¦¬
â”‚       â”‚
â”‚       â”œâ”€â”€ framework/          # Framework (Java/Kotlin) ë¶„ì„
â”‚       â”‚   â”œâ”€â”€ framework_analyzer.py  # FrameworkAnalyzer
â”‚       â”‚   â”‚   â”œâ”€â”€ run_pipeline()     # Phase 1 â†’ Phase 2 â†’ Phase 3
â”‚       â”‚   â”‚   â”œâ”€â”€ _load_all_files()  # ëª¨ë“  íŒŒì¼ ë¡œë“œ (ë³‘ë ¬)
â”‚       â”‚   â”‚   â”œâ”€â”€ _run_phase1()      # Phase 1: ëª¨ë“  íŒŒì¼ AST (ë³‘ë ¬)
â”‚       â”‚   â”‚   â””â”€â”€ _run_phase2()      # Phase 2: ëª¨ë“  íŒŒì¼ LLM (ë³‘ë ¬)
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ ast_processor.py        # FrameworkAstProcessor
â”‚       â”‚       â”œâ”€â”€ build_static_graph_queries() # Phase 1 ì¿¼ë¦¬ ìƒì„±
â”‚       â”‚       â””â”€â”€ run_llm_analysis()  # Phase 2 LLM ë¶„ì„
â”‚       â”‚           â”œâ”€â”€ ë°°ì¹˜ ê³„íš (BatchPlanner)
â”‚       â”‚           â”œâ”€â”€ ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥ (completion_event)
â”‚       â”‚           â””â”€â”€ ì‹¤íŒ¨ ìƒì„¸ ì •ë³´ ìˆ˜ì§‘
â”‚       â”‚
â”‚       â””â”€â”€ dbms/               # DBMS (PL/SQL) ë¶„ì„
â”‚           â”œâ”€â”€ dbms_analyzer.py       # DbmsAnalyzer
â”‚           â”‚   â”œâ”€â”€ run_pipeline()    # DDL â†’ Phase 1 â†’ Phase 2 â†’ Phase 3
â”‚           â”‚   â”œâ”€â”€ _process_ddl()     # Phase 0: DDL ì²˜ë¦¬
â”‚           â”‚   â”œâ”€â”€ _load_all_files()  # ëª¨ë“  íŒŒì¼ ë¡œë“œ (ë³‘ë ¬)
â”‚           â”‚   â”œâ”€â”€ _run_phase1()      # Phase 1: ëª¨ë“  íŒŒì¼ AST (ë³‘ë ¬)
â”‚           â”‚   â””â”€â”€ _run_phase2()      # Phase 2: ëª¨ë“  íŒŒì¼ LLM (ë³‘ë ¬)
â”‚           â”‚
â”‚           â””â”€â”€ ast_processor.py       # DbmsAstProcessor
â”‚               â”œâ”€â”€ build_static_graph_queries() # Phase 1 ì¿¼ë¦¬ ìƒì„±
â”‚               â”œâ”€â”€ _generate_parent_contexts()  # Phase 1.5 ì»¨í…ìŠ¤íŠ¸ ìƒì„±
â”‚               â””â”€â”€ run_llm_analysis()  # Phase 2 LLM ë¶„ì„
â”‚                   â”œâ”€â”€ ë°°ì¹˜ ê³„íš (BatchPlanner)
â”‚                   â”œâ”€â”€ ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ëŒ€ê¸° (context_ready_event)
â”‚                   â”œâ”€â”€ ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥ (completion_event)
â”‚                   â””â”€â”€ ì‹¤íŒ¨ ìƒì„¸ ì •ë³´ ìˆ˜ì§‘
â”‚
â”œâ”€â”€ config/                      # ì„¤ì • ê´€ë¦¬
â”‚   â””â”€â”€ settings.py             # í™˜ê²½ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬ (Singleton)
â”‚       â”œâ”€â”€ Neo4jConfig         # Neo4j ì—°ê²° ì„¤ì •
â”‚       â”œâ”€â”€ LLMConfig           # LLM API ì„¤ì •
â”‚       â”œâ”€â”€ ConcurrencyConfig   # ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •
â”‚       â”œâ”€â”€ BatchConfig         # ë°°ì¹˜ ì²˜ë¦¬ ì„¤ì •
â”‚       â””â”€â”€ PathConfig          # ê²½ë¡œ ì„¤ì •
â”‚
â”œâ”€â”€ util/                        # ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ exception.py            # ê³„ì¸µí™”ëœ ì˜ˆì™¸ í´ëž˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ RoboAnalyzerError   # ê¸°ë³¸ ì˜ˆì™¸
â”‚   â”‚   â”œâ”€â”€ AnalysisError        # ë¶„ì„ ì˜¤ë¥˜ (Fail-Fast ì¤‘ë‹¨)
â”‚   â”‚   â”œâ”€â”€ CodeProcessError    # ì½”ë“œ ì²˜ë¦¬ ì˜¤ë¥˜
â”‚   â”‚   â”œâ”€â”€ LLMCallError        # LLM í˜¸ì¶œ ì˜¤ë¥˜
â”‚   â”‚   â””â”€â”€ QueryExecutionError # Neo4j ì¿¼ë¦¬ ì˜¤ë¥˜
â”‚   â”‚
â”‚   â”œâ”€â”€ stream_utils.py         # NDJSON ìŠ¤íŠ¸ë¦¬ë° ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ emit_message()      # ë©”ì‹œì§€ ì´ë²¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ emit_data()         # ë°ì´í„° ì´ë²¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ emit_error()        # ì—ëŸ¬ ì´ë²¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ emit_complete()     # ì™„ë£Œ ì´ë²¤íŠ¸
â”‚   â”‚   â””â”€â”€ format_graph_result() # ê·¸ëž˜í”„ ê²°ê³¼ í¬ë§·íŒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ logger.py               # êµ¬ì¡°í™”ëœ ë¡œê¹…
â”‚   â”‚   â””â”€â”€ setup_logging()     # ë¡œê¹… ì´ˆê¸°í™”
â”‚   â”‚
â”‚   â”œâ”€â”€ llm_client.py           # LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬
â”‚   â”‚   â””â”€â”€ get_llm()           # LLM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
â”‚   â”‚
â”‚   â”œâ”€â”€ llm_audit.py             # LLM í˜¸ì¶œ ê°ì‚¬ ë¡œê¹…
â”‚   â”‚   â””â”€â”€ invoke_with_audit() # ê°ì‚¬ ë¡œê·¸ì™€ í•¨ê»˜ LLM í˜¸ì¶œ
â”‚   â”‚
â”‚   â”œâ”€â”€ rule_loader.py           # YAML í”„ë¡¬í”„íŠ¸ ê·œì¹™ ë¡œë”
â”‚   â”‚   â”œâ”€â”€ RuleLoader          # ê·œì¹™ ë¡œë” í´ëž˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ render_prompt()     # í”„ë¡¬í”„íŠ¸ ë Œë”ë§
â”‚   â”‚   â””â”€â”€ execute()            # í”„ë¡¬í”„íŠ¸ ì‹¤í–‰ (LLM í˜¸ì¶œ)
â”‚   â”‚
â”‚   â””â”€â”€ utility_tool.py         # ë²”ìš© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚       â”œâ”€â”€ escape_for_cypher()  # Cypher ì´ìŠ¤ì¼€ì´í”„
â”‚       â”œâ”€â”€ calculate_code_token() # í† í° ê³„ì‚°
â”‚       â””â”€â”€ generate_user_story_document() # User Story ë¬¸ì„œ ìƒì„±
â”‚
â”œâ”€â”€ rules/                       # LLM í”„ë¡¬í”„íŠ¸ ê·œì¹™ (YAML)
â”‚   â”œâ”€â”€ framework/              # Framework ë¶„ì„ í”„ë¡¬í”„íŠ¸
â”‚   â”‚   â”œâ”€â”€ analysis.yaml       # ì½”ë“œ ë¶„ì„ (calls ë°°ì—´ í¬í•¨)
â”‚   â”‚   â”œâ”€â”€ class_summary_only.yaml # í´ëž˜ìŠ¤ ìš”ì•½
â”‚   â”‚   â”œâ”€â”€ class_user_story.yaml # í´ëž˜ìŠ¤ User Story
â”‚   â”‚   â”œâ”€â”€ field.yaml          # í•„ë“œ ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ inheritance.yaml    # ìƒì† ê´€ê³„ ë¶„ì„
â”‚   â”‚   â””â”€â”€ method.yaml         # ë©”ì„œë“œ ë¶„ì„
â”‚   â”‚
â”‚   â””â”€â”€ dbms/                   # DBMS ë¶„ì„ í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ analysis.yaml       # ì½”ë“œ ë¶„ì„
â”‚       â”œâ”€â”€ column.yaml         # ì»¬ëŸ¼ ë¶„ì„
â”‚       â”œâ”€â”€ ddl.yaml            # DDL ë¶„ì„
â”‚       â”œâ”€â”€ dml.yaml            # DML ë¶„ì„
â”‚       â”œâ”€â”€ procedure_summary_only.yaml # í”„ë¡œì‹œì € ìš”ì•½
â”‚       â”œâ”€â”€ procedure_user_story.yaml # í”„ë¡œì‹œì € User Story
â”‚       â”œâ”€â”€ table_summary.yaml  # í…Œì´ë¸” ìš”ì•½
â”‚       â””â”€â”€ variables.yaml      # ë³€ìˆ˜ ë¶„ì„
â”‚
â”œâ”€â”€ docs/                        # ë¬¸ì„œ
â”‚   â””â”€â”€ REFACTORING_GUIDE.md    # ë¦¬íŒ©í† ë§ ê°€ì´ë“œ
â”‚
â””â”€â”€ test/                        # í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ test_analyzer.py         # ë¶„ì„ê¸° í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ test_neo4j_return_graph.py # Neo4j ê·¸ëž˜í”„ ë°˜í™˜ í…ŒìŠ¤íŠ¸
    â””â”€â”€ test_procedure_analyzer.py # í”„ë¡œì‹œì € ë¶„ì„ê¸° í…ŒìŠ¤íŠ¸
```

---

## ì‹œìž‘í•˜ê¸°

### ìš”êµ¬ì‚¬í•­

- **Python**: 3.11 ì´ìƒ
- **Neo4j**: 5.x ì´ìƒ
- **LLM API**: OpenAI ë˜ëŠ” í˜¸í™˜ API

### ì„¤ì¹˜

```bash
# 1. ì €ìž¥ì†Œ í´ë¡ 
git clone <repository-url>
cd robo_analyzer_core

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp env.example .env
# .env íŒŒì¼ì„ íŽ¸ì§‘í•˜ì—¬ API í‚¤ ë° Neo4j ì—°ê²° ì •ë³´ ì„¤ì •
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì— ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ì„¸ìš”:

```bash
# Neo4j ì„¤ì •
NEO4J_URI=bolt://127.0.0.1:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-password

# LLM API ì„¤ì •
LLM_API_KEY=your-api-key
LLM_API_BASE=https://api.openai.com/v1
LLM_MODEL=gpt-4.1
LLM_MAX_TOKENS=32768

# ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •
FILE_CONCURRENCY=5
MAX_CONCURRENCY=5

# ì„œë²„ ì„¤ì •
HOST=0.0.0.0
PORT=5502
```

### ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„
python main.py

# ë˜ëŠ” uvicorn ì§ì ‘ ì‹¤í–‰
uvicorn main:app --host 0.0.0.0 --port 5502 --reload
```

ì„œë²„ê°€ ì‹œìž‘ë˜ë©´ ë‹¤ìŒ URLì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:
- API ë¬¸ì„œ: http://localhost:5502/docs
- í—¬ìŠ¤ì²´í¬: http://localhost:5502/health

---

## API ì—”ë“œí¬ì¸íŠ¸

### POST `/robo/analyze/`

ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Neo4j ê·¸ëž˜í”„ ë°ì´í„° ìƒì„±

**Request Headers:**
- `OpenAI-Api-Key`: LLM API í‚¤ (í•„ìˆ˜)
- `Accept-Language`: ì¶œë ¥ ì–¸ì–´ (ê¸°ë³¸: `ko`)

**Request Body:**
```json
{
  "strategy": "framework",  // "framework" ë˜ëŠ” "dbms"
  "target": "java"          // "java", "oracle" ë“±
}
```

**Response:**
- Content-Type: `application/x-ndjson`
- ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ (NDJSON í˜•ì‹)

**ì‘ë‹µ ì´ë²¤íŠ¸ íƒ€ìž…:**

1. **message** (ì§„í–‰ ìƒí™© ë©”ì‹œì§€)
```json
{"type": "message", "content": "ðŸš€ í”„ë ˆìž„ì›Œí¬ ì½”ë“œ ë¶„ì„ì„ ì‹œìž‘í•©ë‹ˆë‹¤"}
{"type": "message", "content": "ðŸ—ï¸ [Phase 1] AST êµ¬ì¡° ê·¸ëž˜í”„ ìƒì„± (10ê°œ íŒŒì¼ ë³‘ë ¬)"}
```

2. **data** (ê·¸ëž˜í”„ ë°ì´í„°)
```json
{
  "type": "data",
  "graph": {
    "Nodes": [
      {
        "Node ID": "4:...",
        "Labels": ["CLASS"],
        "Properties": {
          "class_name": "OrderService",
          "startLine": 10,
          "endLine": 150,
          "directory": "com/example",
          "file_name": "OrderService.java"
        }
      }
    ],
    "Relationships": [
      {
        "Relationship ID": "5:...",
        "Type": "CALLS",
        "Start Node ID": "4:...",
        "End Node ID": "6:...",
        "Properties": {"method": "save"}
      }
    ]
  },
  "line_number": 150,
  "analysis_progress": 75,
  "current_file": "OrderService.java"
}
```

3. **error** (ì˜¤ë¥˜)
```json
{
  "type": "error",
  "content": "ë¶„ì„ ì‹¤íŒ¨: LLM ì‘ë‹µì˜ ë¼ì¸ ë²ˆí˜¸ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
  "errorType": "AnalysisError",
  "traceId": "stream-abc123"
}
```

4. **complete** (ì™„ë£Œ)
```json
{"type": "complete"}
```

**ì˜ˆì‹œ:**
```bash
curl -X POST http://localhost:5502/robo/analyze/ \
  -H "Content-Type: application/json" \
  -H "OpenAI-Api-Key: your-api-key" \
  -d '{
    "strategy": "framework",
    "target": "java"
  }'
```

### DELETE `/robo/data/`

ì‚¬ìš©ìž ë°ì´í„° ì „ì²´ ì‚­ì œ (ìž„ì‹œ íŒŒì¼ + Neo4j ê·¸ëž˜í”„)

**Request Headers:**
- `OpenAI-Api-Key`: LLM API í‚¤ (í•„ìˆ˜, ë°ì´í„° ì‚­ì œ ì‹œ)

**Response:**
```json
{
  "message": "ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

### GET `/`

í—¬ìŠ¤ì²´í¬

**Response:**
```json
{
  "status": "ok",
  "service": "robo-analyzer",
  "version": "2.0.0"
}
```

### GET `/health`

ìƒì„¸ í—¬ìŠ¤ì²´í¬

**Response:**
```json
{
  "status": "healthy",
  "service": "robo-analyzer",
  "version": "2.0.0",
  "config": {
    "file_concurrency": 5,
    "max_concurrency": 5
  }
}
```

---

## ë¶„ì„ ì „ëžµ

### Framework ë¶„ì„ (Java/Kotlin)

Framework ë¶„ì„ì€ 3ë‹¨ê³„ë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

#### Phase 1: AST ê·¸ëž˜í”„ ìƒì„±

ëª¨ë“  íŒŒì¼ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ì—¬ ì •ì  ê·¸ëž˜í”„ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ìƒì„±ë˜ëŠ” ë…¸ë“œ:**
- `CLASS`, `INTERFACE`, `ENUM`: í´ëž˜ìŠ¤ êµ¬ì¡°
- `METHOD`, `CONSTRUCTOR`: ë©”ì„œë“œ
- `FIELD`, `PARAMETER`: í•„ë“œ/íŒŒë¼ë¯¸í„°

**ìƒì„±ë˜ëŠ” ê´€ê³„:**
- `PARENT_OF`: ë¶€ëª¨-ìžì‹ ê´€ê³„ (í´ëž˜ìŠ¤ â†’ ë©”ì„œë“œ)
- `NEXT`: í˜•ì œ ìˆœì„œ ê´€ê³„ (ë©”ì„œë“œ1 â†’ ë©”ì„œë“œ2)
- `HAS_METHOD`, `HAS_FIELD`: í¬í•¨ ê´€ê³„

**Cypher ì¿¼ë¦¬ ì˜ˆì‹œ:**
```cypher
MERGE (n:CLASS {
  class_name: 'OrderService'
})
SET n.startLine = 10,
    n.endLine = 150,
    n.directory = 'com/example',
    n.file_name = 'OrderService.java'
RETURN n
```

#### Phase 2: LLM ë¶„ì„

ëª¨ë“  íŒŒì¼ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ì—¬ LLMì„ í†µí•œ ì½”ë“œ ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜:**
- **ë°°ì¹˜ ì²˜ë¦¬**: í† í° ì œí•œì„ ê³ ë ¤í•œ ë°°ì¹˜ ê·¸ë£¹í•‘
- **ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥**: `completion_event` ê¸°ë°˜ìœ¼ë¡œ ë¶€ëª¨ ë…¸ë“œëŠ” ìžì‹ ë…¸ë“œ ì™„ë£Œ í›„ ì‹¤í–‰
- **ì„±ê³µ/í’ˆì§ˆ ì¶”ì **: `node.ok` í”Œëž˜ê·¸ë¡œ ìžì‹ ì‹¤íŒ¨ ì‹œ ë¶€ëª¨ë„ ë¶ˆì™„ì „ ë§ˆí‚¹
- **ì‹¤íŒ¨ ì²˜ë¦¬**: ë°°ì¹˜ ì‹¤íŒ¨ ì‹œ ìƒì„¸ ì •ë³´ ìˆ˜ì§‘ ë° ìŠ¤íŠ¸ë¦¼ ì¶œë ¥

**ì¶”ê°€ë˜ëŠ” ì •ë³´:**
- `summary`: ì½”ë“œ ìš”ì•½
- `CALLS`: ë©”ì„œë“œ í˜¸ì¶œ ê´€ê³„
- `DEPENDENCY`: íƒ€ìž… ì˜ì¡´ì„± ê´€ê³„
- `ASSOCIATION`, `COMPOSITION`: í´ëž˜ìŠ¤ ê´€ê³„

**Cypher ì¿¼ë¦¬ ì˜ˆì‹œ:**
```cypher
MATCH (src:CLASS {
  startLine: 10,
  directory: 'com/example',
  file_name: 'OrderService.java'
})
SET src.summary = 'ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í´ëž˜ìŠ¤ìž…ë‹ˆë‹¤...'
RETURN src
```

```cypher
MATCH (src:CLASS {...})
MATCH (dst:CLASS)
WHERE toLower(dst.class_name) = toLower('OrderRepository')
MERGE (src)-[r:CALLS {method: 'save'}]->(dst)
RETURN r
```

#### Phase 3: User Story ìƒì„±

ë¶„ì„ ì™„ë£Œ í›„ Neo4jì—ì„œ ìš”ì•½ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ User Story ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

### DBMS ë¶„ì„ (PL/SQL)

DBMS ë¶„ì„ì€ 5ë‹¨ê³„ë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

#### Phase 0: DDL ì²˜ë¦¬

DDL íŒŒì¼ì—ì„œ í…Œì´ë¸”/ì»¬ëŸ¼ ìŠ¤í‚¤ë§ˆë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.

**ìƒì„±ë˜ëŠ” ë…¸ë“œ:**
- `Table`: í…Œì´ë¸”
- `Column`: ì»¬ëŸ¼

**ìƒì„±ë˜ëŠ” ê´€ê³„:**
- `HAS_COLUMN`: í…Œì´ë¸” â†’ ì»¬ëŸ¼
- `FK_TO_TABLE`: ì™¸ëž˜í‚¤ ê´€ê³„

#### Phase 1: AST ê·¸ëž˜í”„ ìƒì„±

í”„ë¡œì‹œì €/í•¨ìˆ˜ íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ ì •ì  ê·¸ëž˜í”„ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ìƒì„±ë˜ëŠ” ë…¸ë“œ:**
- `PROCEDURE`, `FUNCTION`, `TRIGGER`: í”„ë¡œì‹œì €
- `Variable`: ë³€ìˆ˜

**ìƒì„±ë˜ëŠ” ê´€ê³„:**
- `PARENT_OF`: ë¶€ëª¨-ìžì‹ ê´€ê³„
- `NEXT`: í˜•ì œ ìˆœì„œ ê´€ê³„

**ë³‘ë ¬ ì²˜ë¦¬:**
- ìµœëŒ€ 5ê°œ íŒŒì¼ ë™ì‹œ ì²˜ë¦¬ (`file_concurrency`)
- ê° íŒŒì¼ì˜ ASTë¥¼ ë…ë¦½ì ìœ¼ë¡œ ìƒì„±

#### Phase 1.5: ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ìƒì„± (ì»¨í…ìŠ¤íŠ¸ ì¸ì‹ ë¶„ì„)

ê° íŒŒì¼ ë‚´ë¶€ì—ì„œ Top-down ë°©ì‹ìœ¼ë¡œ ë¶€ëª¨ ë…¸ë“œì˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜:**
- **ìŠ¤ì¼ˆë ˆí†¤ ì½”ë“œ ìƒì„±**: ìžì‹ ë¸”ë¡ì„ `....`ë¡œ ì••ì¶•í•˜ì—¬ í† í° ìˆ˜ ê°ì†Œ
- **ê¹Šì´ ìˆœ ì²˜ë¦¬**: ì–•ì€ ë…¸ë“œë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
- **ì¡°ìƒ ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘**: ìµœëŒ€ 300í† í°ê¹Œì§€ ì¡°ìƒ ë…¸ë“œì˜ ì»¨í…ìŠ¤íŠ¸ ê²°í•©
- **LLM ìš”ì•½ ìƒì„±**: ë¶€ëª¨ ë…¸ë“œì˜ í•µì‹¬ ì •ë³´(DML ìœ í˜•, ë³„ì¹­ ë§¤í•‘, ì¡°ì¸ ì¡°ê±´ ë“±) ì¶”ì¶œ

**ìƒì„±ë˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì •ë³´:**
- DML ìœ í˜• ë° íƒ€ê²Ÿ í…Œì´ë¸” (SELECT, MERGE, INSERT ë“±)
- ë³„ì¹­ ë§¤í•‘ (ì˜ˆ: "ë³„ì¹­ A = ì„œë¸Œì¿¼ë¦¬, B = RDF01HH_TB")
- ì¡°ì¸/ë§¤ì¹­ ì¡°ê±´
- í•µì‹¬ ë³€ìˆ˜/íŒŒë¼ë¯¸í„°
- êµ¬ì¡° ìœ í˜• ë° ëª©ì 

**ë³‘ë ¬ ì²˜ë¦¬:**
- ê°™ì€ ê¹Šì´ì˜ ë…¸ë“œëŠ” ìµœëŒ€ 5ê°œ ë™ì‹œ ì²˜ë¦¬ (`MAX_CONCURRENCY`)
- ë¶€ëª¨ì˜ `context_ready_event` ëŒ€ê¸° í›„ ì²˜ë¦¬

#### Phase 2: LLM ë¶„ì„

ëª¨ë“  íŒŒì¼ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ì—¬ LLMì„ í†µí•œ ì½”ë“œ ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜:**
- **ì»¨í…ìŠ¤íŠ¸ í™œìš©**: ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ë³„ì¹­ ì˜¤ì¸ ë°©ì§€ ë° ë¬¸ë§¥ ìœ ì§€
- **ë°°ì¹˜ ì²˜ë¦¬**: í† í° ì œí•œì„ ê³ ë ¤í•œ ë°°ì¹˜ ê·¸ë£¹í•‘
- **ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥**: `completion_event` ê¸°ë°˜ìœ¼ë¡œ ë¶€ëª¨ ë…¸ë“œëŠ” ìžì‹ ë…¸ë“œ ì™„ë£Œ í›„ ì‹¤í–‰
- **ì„±ê³µ/í’ˆì§ˆ ì¶”ì **: `node.ok` í”Œëž˜ê·¸ë¡œ ìžì‹ ì‹¤íŒ¨ ì‹œ ë¶€ëª¨ë„ ë¶ˆì™„ì „ ë§ˆí‚¹
- **ì‹¤íŒ¨ ì²˜ë¦¬**: ë°°ì¹˜ ì‹¤íŒ¨ ì‹œ ìƒì„¸ ì •ë³´ ìˆ˜ì§‘ ë° ìŠ¤íŠ¸ë¦¼ ì¶œë ¥
- **ë³€ìˆ˜ ë¶„ì„**: ë³€ìˆ˜ ì„ ì–¸ ë…¸ë“œ ë¶„ì„ ë° `DECLARES` ê´€ê³„ ìƒì„±
- **í…Œì´ë¸” ë¶„ì„**: DML ë¶„ì„ì„ í†µí•œ `FROM`, `WRITES` ê´€ê³„ ìƒì„± (ë³„ì¹­ì„ í…Œì´ë¸”ë¡œ ì˜¤ì¸í•˜ì§€ ì•ŠìŒ)

**ì¶”ê°€ë˜ëŠ” ì •ë³´:**
- `summary`: í”„ë¡œì‹œì € ìš”ì•½ (ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ ë°˜ì˜)
- `CALL`: í”„ë¡œì‹œì € í˜¸ì¶œ ê´€ê³„
- `FROM`: í…Œì´ë¸” ì½ê¸° ê´€ê³„ (ì‹¤ì œ í…Œì´ë¸”ëª…ë§Œ ì¶”ì¶œ)
- `WRITES`: í…Œì´ë¸” ì“°ê¸° ê´€ê³„ (ì‹¤ì œ í…Œì´ë¸”ëª…ë§Œ ì¶”ì¶œ)

**ë³‘ë ¬ ì²˜ë¦¬:**
- ìµœëŒ€ 5ê°œ íŒŒì¼ ë™ì‹œ ì²˜ë¦¬ (`file_concurrency`)
- ê° íŒŒì¼ ë‚´ë¶€ì—ì„œ ë°°ì¹˜ ë‹¨ìœ„ ë³‘ë ¬ ì²˜ë¦¬

#### Phase 3: User Story ìƒì„±

ë¶„ì„ ì™„ë£Œ í›„ User Story ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

## ê·¸ëž˜í”„ ë°ì´í„° êµ¬ì¡°

### Framework (Java/Kotlin)

#### ë…¸ë“œ íƒ€ìž…

**CLASS**
```json
{
  "Labels": ["CLASS"],
  "Properties": {
    "class_name": "OrderService",
    "directory": "com/example",
    "file_name": "OrderService.java",
    "startLine": 10,
    "endLine": 150,
    "summary": "ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í´ëž˜ìŠ¤ìž…ë‹ˆë‹¤...",
    "node_code": "public class OrderService {...}"
  }
}
```

**METHOD**
```json
{
  "Labels": ["METHOD"],
  "Properties": {
    "name": "save",
    "directory": "com/example",
    "file_name": "OrderService.java",
    "startLine": 20,
    "endLine": 35,
    "summary": "ì£¼ë¬¸ì„ ì €ìž¥í•˜ëŠ” ë©”ì„œë“œìž…ë‹ˆë‹¤...",
    "return_type": "void",
    "node_code": "public void save(Order order) {...}"
  }
}
```

#### ê´€ê³„ íƒ€ìž…

**CALLS** (ë©”ì„œë“œ í˜¸ì¶œ)
```json
{
  "Type": "CALLS",
  "Start Node ID": "4:...",
  "End Node ID": "6:...",
  "Properties": {
    "method": "save",
    "line_number": 25
  }
}
```

**EXTENDS** (ìƒì†)
```json
{
  "Type": "EXTENDS",
  "Start Node ID": "4:...",
  "End Node ID": "8:...",
  "Properties": {}
}
```

**DEPENDENCY** (ì˜ì¡´ì„±)
```json
{
  "Type": "DEPENDENCY",
  "Start Node ID": "4:...",
  "End Node ID": "10:...",
  "Properties": {
    "dependency_type": "import"
  }
}
```

### DBMS (PL/SQL)

#### ë…¸ë“œ íƒ€ìž…

**PROCEDURE**
```json
{
  "Labels": ["PROCEDURE"],
  "Properties": {
    "procedure_name": "CREATE_ORDER",
    "directory": "procedures",
    "file_name": "order_proc.sql",
    "startLine": 10,
    "endLine": 50,
    "summary": "ì£¼ë¬¸ì„ ìƒì„±í•˜ëŠ” í”„ë¡œì‹œì €ìž…ë‹ˆë‹¤...",
    "schema_name": "ORDER_SCHEMA"
  }
}
```

**Table**
```json
{
  "Labels": ["Table"],
  "Properties": {
    "name": "ORDERS",
    "schema": "ORDER_SCHEMA",
    "db": "postgres",
    "description": "ì£¼ë¬¸ í…Œì´ë¸”",
    "table_type": "BASE TABLE"
  }
}
```

#### ê´€ê³„ íƒ€ìž…

**CALL** (í”„ë¡œì‹œì € í˜¸ì¶œ)
```json
{
  "Type": "CALL",
  "Start Node ID": "4:...",
  "End Node ID": "6:...",
  "Properties": {
    "line_number": 25
  }
}
```

**FROM** (í…Œì´ë¸” ì½ê¸°)
```json
{
  "Type": "FROM",
  "Start Node ID": "4:...",
  "End Node ID": "8:...",
  "Properties": {
    "line_number": 30
  }
}
```

**WRITES** (í…Œì´ë¸” ì“°ê¸°)
```json
{
  "Type": "WRITES",
  "Start Node ID": "4:...",
  "End Node ID": "8:...",
  "Properties": {
    "line_number": 35
  }
}
```

---

## ì„¤ì •

### í™˜ê²½ë³€ìˆ˜

| ë³€ìˆ˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|--------|
| `NEO4J_URI` | Neo4j ì—°ê²° URI | `bolt://127.0.0.1:7687` |
| `NEO4J_USER` | Neo4j ì‚¬ìš©ìžëª… | `neo4j` |
| `NEO4J_PASSWORD` | Neo4j ë¹„ë°€ë²ˆí˜¸ | (í•„ìˆ˜) |
| `LLM_API_KEY` | LLM API í‚¤ | (í•„ìˆ˜) |
| `LLM_API_BASE` | LLM API ê¸°ë³¸ URL | `https://api.openai.com/v1` |
| `LLM_MODEL` | ì‚¬ìš©í•  LLM ëª¨ë¸ | `gpt-4.1` |
| `LLM_MAX_TOKENS` | ìµœëŒ€ í† í° ìˆ˜ | `32768` |
| `FILE_CONCURRENCY` | íŒŒì¼ ë³‘ë ¬ ì²˜ë¦¬ ìˆ˜ | `5` |
| `MAX_CONCURRENCY` | ì²­í¬ ë³‘ë ¬ ì²˜ë¦¬ ìˆ˜ | `5` |
| `HOST` | ì„œë²„ í˜¸ìŠ¤íŠ¸ | `0.0.0.0` |
| `PORT` | ì„œë²„ í¬íŠ¸ | `5502` |

### ì„¤ì • íŒŒì¼ êµ¬ì¡°

ì„¤ì •ì€ `config/settings.py`ì—ì„œ ì¤‘ì•™ ê´€ë¦¬ë©ë‹ˆë‹¤:

```python
from config.settings import settings

# Neo4j ì„¤ì •
neo4j_uri = settings.neo4j.uri
neo4j_user = settings.neo4j.user

# LLM ì„¤ì •
llm_api_key = settings.llm.api_key
llm_model = settings.llm.model

# ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •
file_concurrency = settings.concurrency.file_concurrency
max_concurrency = settings.concurrency.max_concurrency
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- **FastAPI**: ë¹„ë™ê¸° ì›¹ í”„ë ˆìž„ì›Œí¬
- **Python 3.11+**: í”„ë¡œê·¸ëž˜ë° ì–¸ì–´

### ë°ì´í„°ë² ì´ìŠ¤
- **Neo4j 5.x**: ê·¸ëž˜í”„ ë°ì´í„°ë² ì´ìŠ¤
- **Cypher**: ê·¸ëž˜í”„ ì¿¼ë¦¬ ì–¸ì–´

### AI/ML
- **LangChain**: LLM í†µí•© í”„ë ˆìž„ì›Œí¬
- **OpenAI API**: LLM ì„œë¹„ìŠ¤ (ë˜ëŠ” í˜¸í™˜ API)

### ìœ í‹¸ë¦¬í‹°
- **aiofiles**: ë¹„ë™ê¸° íŒŒì¼ I/O
- **tiktoken**: í† í° ê³„ì‚°
- **Jinja2**: í…œí”Œë¦¿ ì—”ì§„
- **PyYAML**: YAML íŒŒì‹±

---

## ê¸°ì—¬í•˜ê¸°

1. ì´ ì €ìž¥ì†Œë¥¼ Fork í•©ë‹ˆë‹¤
2. ê¸°ëŠ¥ ë¸Œëžœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤ (`git commit -m 'Add amazing feature'`)
4. ë¸Œëžœì¹˜ì— í‘¸ì‹œí•©ë‹ˆë‹¤ (`git push origin feature/amazing-feature`)
5. Pull Requestë¥¼ ìƒì„±í•©ë‹ˆë‹¤

---

## ë¼ì´ì„ ìŠ¤

MIT License

---

## ë²„ì „ ížˆìŠ¤í† ë¦¬

### v2.4.0 (í˜„ìž¬)
- **Neo4j ë°°ì¹˜ ì²˜ë¦¬ ìµœì í™”**: ì„±ëŠ¥ê³¼ ì•ˆì •ì„± ê°œì„ 
  - DDL/ë²¡í„°: UNWIND ë°°ì¹˜ ì²˜ë¦¬ (ê°™ì€ êµ¬ì¡°ì˜ ëŒ€ëŸ‰ ë°ì´í„°)
  - AST/LLM ë¶„ì„: ë‹¨ì¼ íŠ¸ëžœìž­ì…˜ ìˆœì°¨ ì‹¤í–‰ (ì˜ì¡´ì„± ë³´ìž¥)
  - Cypher ë³€ìˆ˜ëª… `__cy_xxx__` íŒ¨í„´ ë„ìž… (ì¶©ëŒ ë°©ì§€)
- **ìƒì„¸ ë¶„ì„ íë¦„ ë¬¸ì„œí™”**: READMEì— ë‹¨ê³„ë³„ íë¦„ë„ ì¶”ê°€
- **íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë¬¸ì„œ**: `NEO4J_BATCH_TROUBLESHOOTING.md` ì¶”ê°€

### v2.3.0
- **Fail-Fast ì˜¤ë¥˜ ì²˜ë¦¬**: ì¡°ìš©í•œ ì‹¤íŒ¨ ë° ë¶€ë¶„ ì‹¤íŒ¨ ì™„ì „ ì œê±°
  - ëª¨ë“  ë¶„ì„ ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨ (`AnalysisError` ì „íŒŒ)
  - ì˜ˆì™¸ ì‚¼í‚¤ê¸° íŒ¨í„´ ì œê±° (ëª¨ë“  `except` ë¸”ë¡ì—ì„œ `raise`)
  - ë°°ì¹˜ ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨ (ë¶€ë¶„ ì„±ê³µ ë¶ˆí—ˆ)
- **LLM ê²°ê³¼ íƒ€ìž… ê²€ì¦ ê°•í™”**
  - `validate_dict_result()` ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ ë„ìž…
  - dict/tuple ì™¸ íƒ€ìž… ë°˜í™˜ ì‹œ ì¦‰ì‹œ `AnalysisError` ë°œìƒ
  - `asyncio.gather` ê²°ê³¼ë¥¼ tupleë¡œ ë³€í™˜í•˜ì—¬ ì¼ê´€ì„± ìœ ì§€
- **ì½”ë“œ í’ˆì§ˆ ê°œì„ **
  - ì¤‘ë³µ ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´ ì •ë¦¬
  - DEBUG ë¡œê·¸ ì œê±° ë° ë¡œê¹… ìµœì í™”
  - ì½”ë“œ ê°€ë…ì„± í–¥ìƒ

### v2.2.0
- **ì»¨í…ìŠ¤íŠ¸ ì¸ì‹ ë¶„ì„ ì‹œìŠ¤í…œ**: ì¤‘ì²©ëœ DML êµ¬ì¡°ì—ì„œ ë³„ì¹­ ì˜¤ì¸ ë°©ì§€
  - Phase 1.5: ë¶€ëª¨ ë…¸ë“œì˜ ì»¨í…ìŠ¤íŠ¸ ìƒì„± (Top-down)
  - ì»¨í…ìŠ¤íŠ¸ ì „ë‹¬: ìžì‹ ë…¸ë“œ ë¶„ì„ ì‹œ ë¶€ëª¨ ì»¨í…ìŠ¤íŠ¸ í™œìš©
  - ë³„ì¹­ ë§¤í•‘ ì •ë³´ë¥¼ í†µí•œ ì •í™•í•œ í…Œì´ë¸”ëª… ì¶”ì¶œ
  - í† í° íš¨ìœ¨ì„±: ìŠ¤ì¼ˆë ˆí†¤ ì½”ë“œ ì••ì¶• ë° ì»¨í…ìŠ¤íŠ¸ í† í° ì œí•œ (300í† í°)
- **Framework ì»¨í…ìŠ¤íŠ¸ ì§€ì›**: Java ì½”ë“œ íŠ¹ì„±ì— ë§žëŠ” ì»¨í…ìŠ¤íŠ¸ ìƒì„±
- **ë³‘ë ¬ ì²˜ë¦¬ ê°œì„ **: íŒŒì¼ ë ˆë²¨ ë³‘ë ¬ ì²˜ë¦¬ (ìµœëŒ€ 5ê°œ íŒŒì¼ ë™ì‹œ)

### v2.1.0
- **BaseStreamingAnalyzer ë„ìž…**: ê³µí†µ ë¶„ì„ í”„ë ˆìž„ ë¶„ë¦¬ (í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´)
- **Phase1/Phase2 êµ¬ì¡° í†µì¼**: ëª¨ë“  íŒŒì¼ AST â†’ ëª¨ë“  íŒŒì¼ LLM (ë³‘ë ¬ ì²˜ë¦¬)
- **ìžì‹â†’ë¶€ëª¨ ì˜ì¡´ì„± ë³´ìž¥**: `completion_event` ê¸°ë°˜ ìˆœì„œ ë³´ìž¥
- **ì„±ê³µ/í’ˆì§ˆ ì¶”ì **: `node.ok` í”Œëž˜ê·¸ë¡œ ë¶ˆì™„ì „ ìš”ì•½ ì „íŒŒ ë°©ì§€
- **ë°°ì¹˜ ì‹¤íŒ¨ ìƒì„¸ ì •ë³´**: ì‹¤íŒ¨ ë°°ì¹˜ ID, ë¼ì¸ ë²”ìœ„, ì—ëŸ¬ ë©”ì‹œì§€ ìˆ˜ì§‘ ë° ìŠ¤íŠ¸ë¦¼ ì¶œë ¥
- **User Story ê·œì¹™ ì™„í™”**: ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(CRUD, ë°°ì¹˜ ë“±)ì—ì„œ User Story ë„ì¶œ
- **í†µê³„ í•„ë“œ ì •ì‹í™”**: `llm_batches_failed` ì •ì‹ í•„ë“œ ì¶”ê°€

### v2.0.0
- 2ë‹¨ê³„ ë¶„ì„ ì•„í‚¤í…ì²˜ (Phase 1: AST â†’ Phase 2: LLM)
- ì´ì¤‘ ë³‘ë ¬ ì²˜ë¦¬ (íŒŒì¼ ë ˆë²¨ + ì²­í¬ ë ˆë²¨)
- ë©”ì„œë“œ í˜¸ì¶œ ì²˜ë¦¬ ë‹¨ìˆœí™” (calls ë°°ì—´ í†µí•©)
- ì˜ˆì™¸ ì²˜ë¦¬ ì—„ê²©í™”
- í™˜ê²½ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬

---

*ìž‘ì„±ì¼: 2025-01-XX*
*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-13*
