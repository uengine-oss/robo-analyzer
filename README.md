# ROBO Analyzer

**ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Neo4j ê·¸ë˜í”„ë¡œ ë³€í™˜í•˜ëŠ” AI ê¸°ë°˜ ì½”ë“œ ë¶„ì„ ì„œë¹„ìŠ¤**

ì´ í”„ë¡œì íŠ¸ëŠ” í´ë¦° ì•„í‚¤í…ì²˜ë¡œ ì „í™˜í•˜ê¸° ìœ„í•´ ë¨¼ì € ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ì´í•´í•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•©ë‹ˆë‹¤. ë ˆê±°ì‹œ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ êµ¬ì¡°í™”ëœ ê·¸ë˜í”„ ë°ì´í„°ë¡œ ë³€í™˜í•˜ê³ , ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì™€ ì˜ì¡´ì„±ì„ ì‹œê°í™”í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ë¶„ì„ íë¦„](#ë¶„ì„-íë¦„)
5. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
6. [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
7. [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
8. [ë¶„ì„ ì „ëµ](#ë¶„ì„-ì „ëµ)
9. [ê·¸ë˜í”„ ë°ì´í„° êµ¬ì¡°](#ê·¸ë˜í”„-ë°ì´í„°-êµ¬ì¡°)
10. [ì„¤ì •](#ì„¤ì •)
11. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)

---

## ê°œìš”

ROBO AnalyzerëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Neo4j ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤ì— êµ¬ì¡°í™”ëœ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. 

### í•µì‹¬ ëª©ì 

- **ë ˆê±°ì‹œ ì½”ë“œ ë¶„ì„**: ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ë¶„ì„í•˜ì—¬ êµ¬ì¡°ì™€ ì˜ì¡´ì„± íŒŒì•…
- **ê·¸ë˜í”„ ê¸°ë°˜ ì‹œê°í™”**: Neo4jë¥¼ í™œìš©í•œ ì½”ë“œ êµ¬ì¡° ì‹œê°í™”
- **AI ê¸°ë°˜ ë¶„ì„**: LLMì„ í™œìš©í•œ ì½”ë“œ ìš”ì•½ ë° ê´€ê³„ ì¶”ì¶œ
- **í´ë¦° ì•„í‚¤í…ì²˜ ì „í™˜ ì¤€ë¹„**: ì½”ë“œ ë¶„ì„ì„ í†µí•œ ë¦¬íŒ©í† ë§ ê¸°ë°˜ ë§ˆë ¨

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

**"ëª¨ë“  íŒŒì¼ì— ëŒ€í•´ ASTë¥¼ ë¨¼ì € ë½‘ëŠ”ë‹¤"**

ì´ ì›ì¹™ì€ ëª¨ë“  ì„¤ê³„ì˜ í•µì‹¬ì…ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ëª¨ë“  íŒŒì¼ â†’ AST êµ¬ì¡° ë¨¼ì € ìƒì„± (Phase 1)                â”‚
â”‚  â†“                                                       â”‚
â”‚  ëª¨ë“  íŒŒì¼ â†’ LLM ë¶„ì„ (Phase 2)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì´ë ‡ê²Œ ì„¤ê³„í•œ ì´ìœ :**

1. **ë©”ì„œë“œ í˜¸ì¶œ ì²˜ë¦¬ ë‹¨ìˆœí™”**: AST êµ¬ì¡°ê°€ ìˆìœ¼ë©´ `target.methodName`ì„ íŒŒì‹±í•´ì„œ ê¸°ì¡´ í´ë˜ìŠ¤/ë©”ì„œë“œ ë…¸ë“œë¥¼ ë°”ë¡œ ì°¾ì„ ìˆ˜ ìˆìŒ
2. **ë³‘ë ¬ ì²˜ë¦¬ íš¨ìœ¨ì„±**: ëª¨ë“  íŒŒì¼ì˜ ASTê°€ ë¨¼ì € ìˆìœ¼ë©´, LLM ë¶„ì„ ë‹¨ê³„ì—ì„œ ê° íŒŒì¼ì„ ë…ë¦½ì ìœ¼ë¡œ ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥
3. **ê´€ê³„ ì—°ê²° ë‹¨ìˆœí™”**: `MATCH`ë¡œ ê¸°ì¡´ ë…¸ë“œë¥¼ ë°”ë¡œ ì¡°íšŒí•˜ì—¬ ê´€ê³„ ìƒì„±

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. Framework ë¶„ì„ (Java/Kotlin)

- **AST ê¸°ë°˜ êµ¬ì¡° ë¶„ì„**: í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤, ë©”ì„œë“œ, í•„ë“œ ì¶”ì¶œ
- **ìƒì†/êµ¬í˜„ ê´€ê³„**: `EXTENDS`, `IMPLEMENTS` ê´€ê³„ ìƒì„±
- **ë©”ì„œë“œ í˜¸ì¶œ ì¶”ì **: `CALLS` ê´€ê³„ë¥¼ í†µí•œ ë©”ì„œë“œ í˜¸ì¶œ ì²´ì¸ ë¶„ì„
- **ì˜ì¡´ì„± ë¶„ì„**: `DEPENDENCY` ê´€ê³„ë¥¼ í†µí•œ íƒ€ì… ì˜ì¡´ì„± íŒŒì•…
- **í´ë˜ìŠ¤ ê´€ê³„**: `ASSOCIATION`, `COMPOSITION` ê´€ê³„ ì¶”ì¶œ

### 2. DBMS ë¶„ì„ (PL/SQL)

- **í”„ë¡œì‹œì €/í•¨ìˆ˜ ë¶„ì„**: PROCEDURE, FUNCTION, TRIGGER ë…¸ë“œ ìƒì„±
- **í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ë¶„ì„**: DDL íŒŒì¼ì—ì„œ í…Œì´ë¸”/ì»¬ëŸ¼ êµ¬ì¡° ì¶”ì¶œ
- **ë°ì´í„° ì ‘ê·¼ ì¶”ì **: `FROM`, `WRITES` ê´€ê³„ë¥¼ í†µí•œ í…Œì´ë¸” ì ‘ê·¼ ë¶„ì„
- **í”„ë¡œì‹œì € í˜¸ì¶œ ì²´ì¸**: `CALL` ê´€ê³„ë¥¼ í†µí•œ í”„ë¡œì‹œì € í˜¸ì¶œ ì¶”ì 
- **ì™¸ë˜í‚¤ ê´€ê³„**: `FK_TO_TABLE` ê´€ê³„ë¥¼ í†µí•œ í…Œì´ë¸” ê´€ê³„ íŒŒì•…

### 3. ì´ì¤‘ ë³‘ë ¬ ì²˜ë¦¬

- **íŒŒì¼ ë ˆë²¨ ë³‘ë ¬**: ìµœëŒ€ 5ê°œ íŒŒì¼ ë™ì‹œ ì²˜ë¦¬
- **ì²­í¬ ë ˆë²¨ ë³‘ë ¬**: LLM ë¶„ì„ ì‹œ ìµœëŒ€ 5ê°œ ì²­í¬ ë™ì‹œ ì²˜ë¦¬
- **Cypher ë™ì‹œì„± ë³´í˜¸**: `asyncio.Lock`ì„ í†µí•œ Neo4j ì¿¼ë¦¬ ë™ì‹œì„± ì œì–´

### 4. ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°

- **NDJSON í˜•ì‹**: ì‹¤ì‹œê°„ ë¶„ì„ ì§„í–‰ ìƒí™© ì „ë‹¬
- **ì´ë²¤íŠ¸ íƒ€ì…**: `message`, `data`, `error`, `complete`
- **ì§„í–‰ë¥  ì¶”ì **: íŒŒì¼ë³„, ì „ì²´ ë¶„ì„ ì§„í–‰ë¥  í‘œì‹œ

### 5. User Story ìë™ ìƒì„±

- **ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ ìƒì„±**: ë¶„ì„ ê²°ê³¼ì—ì„œ User Story ë° Acceptance Criteria ìë™ ìƒì„±
- **ë§ˆí¬ë‹¤ìš´ í˜•ì‹**: êµ¬ì¡°í™”ëœ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ ìƒì„±

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client (Frontend)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/NDJSON Stream
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Application                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              API Router (router.py)                  â”‚   â”‚
â”‚  â”‚  - POST /robo/analyze/                               â”‚   â”‚
â”‚  â”‚  - DELETE /robo/data/                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Analysis Orchestrator (orchestrator.py)          â”‚   â”‚
â”‚  â”‚  - ìš”ì²­ íŒŒì‹± ë° ê²€ì¦                                   â”‚   â”‚
â”‚  â”‚  - íŒŒì¼ íƒìƒ‰                                          â”‚   â”‚
â”‚  â”‚  - ë¶„ì„ ì „ëµ ì„ íƒ                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Analyzer Strategy Layer                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Framework Analyzer   â”‚  â”‚   DBMS Analyzer      â”‚        â”‚
â”‚  â”‚  (Java/Kotlin)       â”‚  â”‚   (PL/SQL)           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚             â”‚                          â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  AST Processor       â”‚  â”‚  AST Processor        â”‚        â”‚
â”‚  â”‚  - Phase 1: AST      â”‚  â”‚  - Phase 1: AST       â”‚        â”‚
â”‚  â”‚  - Phase 2: LLM     â”‚  â”‚  - Phase 2: LLM       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Core Services                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Neo4j Client   â”‚  â”‚   LLM Client     â”‚                 â”‚
â”‚  â”‚  - Graph Query  â”‚  â”‚   - OpenAI API   â”‚                 â”‚
â”‚  â”‚  - Lock Control â”‚  â”‚   - Custom LLM   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚
              â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Neo4j Database     â”‚    â”‚   LLM API Service    â”‚
â”‚   (Graph Storage)    â”‚    â”‚   (AI Analysis)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë ˆì´ì–´ êµ¬ì¡°

1. **API Layer** (`api/`)
   - FastAPI ê¸°ë°˜ REST API
   - ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬
   - ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ê´€ë¦¬

2. **Orchestration Layer** (`api/orchestrator.py`)
   - ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
   - íŒŒì¼ íƒìƒ‰ ë° ê²€ì¦
   - ì „ëµ ì„ íƒ ë° ì‹¤í–‰

3. **Analysis Layer** (`analyzer/strategy/`)
   - ì „ëµ íŒ¨í„´ ê¸°ë°˜ ë¶„ì„ê¸°
   - Framework/DBMS ë¶„ì„ ì „ëµ
   - AST ì²˜ë¦¬ ë° LLM ë¶„ì„

4. **Service Layer** (`analyzer/`, `util/`)
   - Neo4j í´ë¼ì´ì–¸íŠ¸
   - LLM í´ë¼ì´ì–¸íŠ¸
   - ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜

5. **Configuration Layer** (`config/`)
   - í™˜ê²½ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬
   - ì„¤ì • ì‹±ê¸€í†¤

---

## ë¶„ì„ íë¦„

### ì „ì²´ ë¶„ì„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
Client                    API Router          Orchestrator         Analyzer          Neo4j Client        LLM Client
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚â”€â”€ POST /robo/analyze/ â”€â”€â”€â”€>â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚â”€â”€ create_orch() â”€â”€>â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚<â”€â”€ orchestrator â”€â”€â”€â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚â”€â”€ discover_files() â”€>â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚<â”€â”€ file_names â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚â”€â”€ run_analysis() â”€â”€>â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚â”€â”€ analyze() â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ ensure_constraints() â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚<â”€â”€ OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ Phase 1: AST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ message: "Phase 1 ì‹œì‘" â”€â”€â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ build_static_graph() â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚<â”€â”€ queries â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ run_graph_query() â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ data: graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚<â”€â”€ graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ Phase 2: LLM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ message: "Phase 2 ì‹œì‘" â”€â”€â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ run_llm_analysis() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚<â”€â”€ analysis_result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ build_queries() â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ run_graph_query() â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ data: graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚<â”€â”€ graph â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚â”€â”€ Phase 3: User Story â”€â”€â”€â”€>â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ data: user_story â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚<â”€â”€ document â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚<â”€â”€ complete â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
  â”‚                           â”‚                    â”‚                  â”‚                  â”‚                  â”‚
  â”‚<â”€â”€ complete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚                  â”‚                  â”‚
```

### Framework ë¶„ì„ ìƒì„¸ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì†ŒìŠ¤ íŒŒì¼ ëª©ë¡                               â”‚
â”‚  - OrderService.java                                            â”‚
â”‚  - OrderRepository.java                                         â”‚
â”‚  - OrderController.java                                         â”‚
â”‚  ... (ì´ Nê°œ íŒŒì¼)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ (íŒŒì¼ 5ê°œ ë³‘ë ¬ ì²˜ë¦¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ...    â”‚
â”‚  â”‚  File 1      â”‚  â”‚  File 2      â”‚  â”‚  File 3      â”‚         â”‚
â”‚  â”‚  AST ë¡œë“œ    â”‚  â”‚  AST ë¡œë“œ    â”‚  â”‚  AST ë¡œë“œ    â”‚         â”‚
â”‚  â”‚  (JSON)      â”‚  â”‚  (JSON)      â”‚  â”‚  (JSON)      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 1)       â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ì •ì ê·¸ë˜í”„   â”‚  â”‚ ì •ì ê·¸ë˜í”„    â”‚  â”‚ ì •ì ê·¸ë˜í”„    â”‚        â”‚
â”‚  â”‚  ë…¸ë“œìƒì„±    â”‚  â”‚  ë…¸ë“œìƒì„±     â”‚  â”‚  ë…¸ë“œìƒì„±     â”‚        â”‚
â”‚  â”‚  - CLASS     â”‚  â”‚  - CLASS      â”‚  â”‚  - CLASS      â”‚        â”‚
â”‚  â”‚  - METHOD    â”‚  â”‚  - METHOD     â”‚  â”‚  - METHOD     â”‚        â”‚
â”‚  â”‚  - FIELD     â”‚  â”‚  - FIELD      â”‚  â”‚  - FIELD      â”‚        â”‚
â”‚  â”‚  - ê´€ê³„      â”‚  â”‚  - ê´€ê³„       â”‚  â”‚  - ê´€ê³„       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚
â”‚         â–¼ (Phase 2)       â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ LLM ë¶„ì„    â”‚  â”‚ LLM ë¶„ì„     â”‚  â”‚ LLM ë¶„ì„     â”‚        â”‚
â”‚  â”‚ (ì²­í¬ë³„)    â”‚  â”‚ (ì²­í¬ë³„)     â”‚  â”‚ (ì²­í¬ë³„)     â”‚        â”‚
â”‚  â”‚  - summary  â”‚  â”‚  - summary   â”‚  â”‚  - summary   â”‚        â”‚
â”‚  â”‚  - CALLS    â”‚  â”‚  - CALLS     â”‚  â”‚  - CALLS     â”‚        â”‚
â”‚  â”‚  - DEPEND   â”‚  â”‚  - DEPEND    â”‚  â”‚  - DEPEND    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ (Cypher Lock ë³´í˜¸)
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚         Neo4j ê·¸ë˜í”„ ì €ì¥         â”‚
                      â”‚  - ë…¸ë“œ ìƒì„±/ì—…ë°ì´íŠ¸             â”‚
                      â”‚  - ê´€ê³„ ìƒì„±                      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚      User Story ë¬¸ì„œ ìƒì„±        â”‚
                      â”‚  - í´ë˜ìŠ¤ë³„ ìš”ì•½                  â”‚
                      â”‚  - User Story ì¶”ì¶œ               â”‚
                      â”‚  - Acceptance Criteria ìƒì„±      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DBMS ë¶„ì„ ìƒì„¸ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DDL íŒŒì¼ ì²˜ë¦¬ (Phase 0)                      â”‚
â”‚  - schema.sql                                                  â”‚
â”‚  - tables.sql                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í…Œì´ë¸”/ì»¬ëŸ¼ ë…¸ë“œ ìƒì„±                        â”‚
â”‚  - Table ë…¸ë“œ                                                  â”‚
â”‚  - Column ë…¸ë“œ                                                 â”‚
â”‚  - FK_TO_TABLE ê´€ê³„                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì†ŒìŠ¤ íŒŒì¼ ëª©ë¡                               â”‚
â”‚  - procedure1.sql                                              â”‚
â”‚  - procedure2.sql                                              â”‚
â”‚  ... (ì´ Nê°œ íŒŒì¼)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ (íŒŒì¼ë³„ ìˆœì°¨ ì²˜ë¦¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  File 1: procedure1.sql                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚  â”‚
â”‚  â”‚  â”‚ Phase 1: AST â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - PROCEDURE â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - FUNCTION  â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - Variable   â”‚                                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚  â”‚
â”‚  â”‚         â”‚                                                 â”‚  â”‚
â”‚  â”‚         â–¼                                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚  â”‚
â”‚  â”‚  â”‚ Phase 2: LLM â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ (ì²­í¬ë³„)    â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - summary    â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - CALL       â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - FROM       â”‚                                        â”‚  â”‚
â”‚  â”‚  â”‚ - WRITES     â”‚                                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  File 2: procedure2.sql                                   â”‚  â”‚
â”‚  â”‚  ... (ë™ì¼í•œ íë¦„)                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚      User Story ë¬¸ì„œ ìƒì„±        â”‚
                      â”‚  - í”„ë¡œì‹œì €ë³„ ìš”ì•½                â”‚
                      â”‚  - User Story ì¶”ì¶œ               â”‚
                      â”‚  - Acceptance Criteria ìƒì„±      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
robo_analyzer_core/
â”œâ”€â”€ main.py                      # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚
â”œâ”€â”€ api/                         # REST API ë ˆì´ì–´
â”‚   â”œâ”€â”€ router.py               # API ë¼ìš°í„° ì •ì˜
â”‚   â”‚   â”œâ”€â”€ POST /robo/analyze/ # ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ (ìŠ¤íŠ¸ë¦¬ë°)
â”‚   â”‚   â””â”€â”€ DELETE /robo/data/  # ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ
â”‚   â””â”€â”€ orchestrator.py         # ë¶„ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
â”‚       â”œâ”€â”€ AnalysisOrchestrator # ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
â”‚       â”œâ”€â”€ discover_source_files() # ì†ŒìŠ¤ íŒŒì¼ íƒìƒ‰
â”‚       â””â”€â”€ cleanup_all_data()  # ë°ì´í„° ì •ë¦¬
â”‚
â”œâ”€â”€ analyzer/                    # ë¶„ì„ ì—”ì§„ ì½”ì–´
â”‚   â”œâ”€â”€ neo4j_client.py         # Neo4j ë¹„ë™ê¸° í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ execute_queries()  # Cypher ì¿¼ë¦¬ ì‹¤í–‰
â”‚   â”‚   â”œâ”€â”€ run_graph_query()  # ê·¸ë˜í”„ ê²°ê³¼ ë°˜í™˜
â”‚   â”‚   â””â”€â”€ ensure_constraints() # ì œì•½ì¡°ê±´ ìƒì„±
â”‚   â”‚
â”‚   â”œâ”€â”€ parallel_executor.py    # ì´ì¤‘ ë³‘ë ¬ ì²˜ë¦¬ ì‹¤í–‰ê¸°
â”‚   â”‚   â”œâ”€â”€ ParallelExecutor    # íŒŒì¼ ë ˆë²¨ ë³‘ë ¬ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ ChunkBatcher        # ì²­í¬ ë ˆë²¨ ë°°ì¹˜ ì²˜ë¦¬
â”‚   â”‚
â”‚   â””â”€â”€ strategy/               # ë¶„ì„ ì „ëµ íŒ¨í„´
â”‚       â”œâ”€â”€ base_analyzer.py    # AnalyzerStrategy ì¸í„°í˜ì´ìŠ¤
â”‚       â”œâ”€â”€ analyzer_factory.py # ì „ëµ íŒ©í† ë¦¬
â”‚       â”‚
â”‚       â”œâ”€â”€ framework/          # Framework (Java/Kotlin) ë¶„ì„
â”‚       â”‚   â”œâ”€â”€ framework_analyzer.py  # FrameworkAnalyzer
â”‚       â”‚   â”‚   â”œâ”€â”€ analyze()          # ë©”ì¸ ë¶„ì„ ë©”ì„œë“œ
â”‚       â”‚   â”‚   â”œâ”€â”€ _run_phase1()      # Phase 1: AST ê·¸ë˜í”„
â”‚       â”‚   â”‚   â”œâ”€â”€ _run_phase2()      # Phase 2: LLM ë¶„ì„
â”‚       â”‚   â”‚   â””â”€â”€ _create_user_story_doc() # Phase 3: User Story
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ ast_processor.py        # FrameworkAstProcessor
â”‚       â”‚       â”œâ”€â”€ build_static_graph_queries() # Phase 1 ì¿¼ë¦¬ ìƒì„±
â”‚       â”‚       â””â”€â”€ run_llm_analysis()  # Phase 2 LLM ë¶„ì„
â”‚       â”‚
â”‚       â””â”€â”€ dbms/               # DBMS (PL/SQL) ë¶„ì„
â”‚           â”œâ”€â”€ dbms_analyzer.py       # DbmsAnalyzer
â”‚           â”‚   â”œâ”€â”€ analyze()          # ë©”ì¸ ë¶„ì„ ë©”ì„œë“œ
â”‚           â”‚   â”œâ”€â”€ _process_ddl()     # DDL ì²˜ë¦¬
â”‚           â”‚   â”œâ”€â”€ _analyze_file()    # íŒŒì¼ ë¶„ì„
â”‚           â”‚   â””â”€â”€ _create_user_story_doc() # User Story ìƒì„±
â”‚           â”‚
â”‚           â””â”€â”€ ast_processor.py       # DbmsAstProcessor
â”‚               â”œâ”€â”€ build_static_graph() # Phase 1 ì¿¼ë¦¬ ìƒì„±
â”‚               â””â”€â”€ run_llm_analysis()  # Phase 2 LLM ë¶„ì„
â”‚
â”œâ”€â”€ config/                      # ì„¤ì • ê´€ë¦¬
â”‚   â””â”€â”€ settings.py             # í™˜ê²½ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬ (Singleton)
â”‚       â”œâ”€â”€ Neo4jConfig         # Neo4j ì—°ê²° ì„¤ì •
â”‚       â”œâ”€â”€ LLMConfig           # LLM API ì„¤ì •
â”‚       â”œâ”€â”€ ConcurrencyConfig   # ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •
â”‚       â”œâ”€â”€ BatchConfig         # ë°°ì¹˜ ì²˜ë¦¬ ì„¤ì •
â”‚       â””â”€â”€ PathConfig          # ê²½ë¡œ ì„¤ì •
â”‚
â”œâ”€â”€ util/                        # ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ
â”‚   â”œâ”€â”€ exception.py            # ê³„ì¸µí™”ëœ ì˜ˆì™¸ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ RoboAnalyzerError   # ê¸°ë³¸ ì˜ˆì™¸
â”‚   â”‚   â”œâ”€â”€ AnalysisError        # ë¶„ì„ ì˜¤ë¥˜
â”‚   â”‚   â”œâ”€â”€ CodeProcessError    # ì½”ë“œ ì²˜ë¦¬ ì˜¤ë¥˜
â”‚   â”‚   â”œâ”€â”€ LLMCallError        # LLM í˜¸ì¶œ ì˜¤ë¥˜
â”‚   â”‚   â””â”€â”€ QueryExecutionError # Neo4j ì¿¼ë¦¬ ì˜¤ë¥˜
â”‚   â”‚
â”‚   â”œâ”€â”€ stream_utils.py         # NDJSON ìŠ¤íŠ¸ë¦¬ë° ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ emit_message()      # ë©”ì‹œì§€ ì´ë²¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ emit_data()         # ë°ì´í„° ì´ë²¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ emit_error()        # ì—ëŸ¬ ì´ë²¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ emit_complete()     # ì™„ë£Œ ì´ë²¤íŠ¸
â”‚   â”‚   â””â”€â”€ format_graph_result() # ê·¸ë˜í”„ ê²°ê³¼ í¬ë§·íŒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ logger.py               # êµ¬ì¡°í™”ëœ ë¡œê¹…
â”‚   â”‚   â””â”€â”€ setup_logging()     # ë¡œê¹… ì´ˆê¸°í™”
â”‚   â”‚
â”‚   â”œâ”€â”€ llm_client.py           # LLM í´ë¼ì´ì–¸íŠ¸ íŒ©í† ë¦¬
â”‚   â”‚   â””â”€â”€ get_llm()           # LLM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
â”‚   â”‚
â”‚   â”œâ”€â”€ llm_audit.py             # LLM í˜¸ì¶œ ê°ì‚¬ ë¡œê¹…
â”‚   â”‚   â””â”€â”€ invoke_with_audit() # ê°ì‚¬ ë¡œê·¸ì™€ í•¨ê»˜ LLM í˜¸ì¶œ
â”‚   â”‚
â”‚   â”œâ”€â”€ rule_loader.py           # YAML í”„ë¡¬í”„íŠ¸ ê·œì¹™ ë¡œë”
â”‚   â”‚   â”œâ”€â”€ RuleLoader          # ê·œì¹™ ë¡œë” í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ render_prompt()     # í”„ë¡¬í”„íŠ¸ ë Œë”ë§
â”‚   â”‚   â””â”€â”€ execute()            # í”„ë¡¬í”„íŠ¸ ì‹¤í–‰ (LLM í˜¸ì¶œ)
â”‚   â”‚
â”‚   â””â”€â”€ utility_tool.py         # ë²”ìš© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚       â”œâ”€â”€ escape_for_cypher()  # Cypher ì´ìŠ¤ì¼€ì´í”„
â”‚       â”œâ”€â”€ calculate_code_token() # í† í° ê³„ì‚°
â”‚       â””â”€â”€ generate_user_story_document() # User Story ë¬¸ì„œ ìƒì„±
â”‚
â”œâ”€â”€ rules/                       # LLM í”„ë¡¬í”„íŠ¸ ê·œì¹™ (YAML)
â”‚   â”œâ”€â”€ framework/              # Framework ë¶„ì„ í”„ë¡¬í”„íŠ¸
â”‚   â”‚   â”œâ”€â”€ analysis.yaml       # ì½”ë“œ ë¶„ì„ (calls ë°°ì—´ í¬í•¨)
â”‚   â”‚   â”œâ”€â”€ class_summary_only.yaml # í´ë˜ìŠ¤ ìš”ì•½
â”‚   â”‚   â”œâ”€â”€ class_user_story.yaml # í´ë˜ìŠ¤ User Story
â”‚   â”‚   â”œâ”€â”€ field.yaml          # í•„ë“œ ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ inheritance.yaml    # ìƒì† ê´€ê³„ ë¶„ì„
â”‚   â”‚   â””â”€â”€ method.yaml         # ë©”ì„œë“œ ë¶„ì„
â”‚   â”‚
â”‚   â””â”€â”€ dbms/                   # DBMS ë¶„ì„ í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ analysis.yaml       # ì½”ë“œ ë¶„ì„
â”‚       â”œâ”€â”€ column.yaml         # ì»¬ëŸ¼ ë¶„ì„
â”‚       â”œâ”€â”€ ddl.yaml            # DDL ë¶„ì„
â”‚       â”œâ”€â”€ dml.yaml            # DML ë¶„ì„
â”‚       â”œâ”€â”€ procedure_summary_only.yaml # í”„ë¡œì‹œì € ìš”ì•½
â”‚       â”œâ”€â”€ procedure_user_story.yaml # í”„ë¡œì‹œì € User Story
â”‚       â”œâ”€â”€ table_summary.yaml  # í…Œì´ë¸” ìš”ì•½
â”‚       â””â”€â”€ variables.yaml      # ë³€ìˆ˜ ë¶„ì„
â”‚
â”œâ”€â”€ docs/                        # ë¬¸ì„œ
â”‚   â””â”€â”€ REFACTORING_GUIDE.md    # ë¦¬íŒ©í† ë§ ê°€ì´ë“œ
â”‚
â””â”€â”€ test/                        # í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ test_analyzer.py         # ë¶„ì„ê¸° í…ŒìŠ¤íŠ¸
    â”œâ”€â”€ test_neo4j_return_graph.py # Neo4j ê·¸ë˜í”„ ë°˜í™˜ í…ŒìŠ¤íŠ¸
    â””â”€â”€ test_procedure_analyzer.py # í”„ë¡œì‹œì € ë¶„ì„ê¸° í…ŒìŠ¤íŠ¸
```

---

## ì‹œì‘í•˜ê¸°

### ìš”êµ¬ì‚¬í•­

- **Python**: 3.11 ì´ìƒ
- **Neo4j**: 5.x ì´ìƒ
- **LLM API**: OpenAI ë˜ëŠ” í˜¸í™˜ API

### ì„¤ì¹˜

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd robo_analyzer_core

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp env.example .env
# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ API í‚¤ ë° Neo4j ì—°ê²° ì •ë³´ ì„¤ì •
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì— ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ì„¸ìš”:

```bash
# Neo4j ì„¤ì •
NEO4J_URI=bolt://127.0.0.1:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-password

# LLM API ì„¤ì •
LLM_API_KEY=your-api-key
LLM_API_BASE=https://api.openai.com/v1
LLM_MODEL=gpt-4.1
LLM_MAX_TOKENS=32768

# ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •
FILE_CONCURRENCY=5
MAX_CONCURRENCY=5

# ì„œë²„ ì„¤ì •
HOST=0.0.0.0
PORT=5502
```

### ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„
python main.py

# ë˜ëŠ” uvicorn ì§ì ‘ ì‹¤í–‰
uvicorn main:app --host 0.0.0.0 --port 5502 --reload
```

ì„œë²„ê°€ ì‹œì‘ë˜ë©´ ë‹¤ìŒ URLì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- API ë¬¸ì„œ: http://localhost:5502/docs
- í—¬ìŠ¤ì²´í¬: http://localhost:5502/health

---

## API ì—”ë“œí¬ì¸íŠ¸

### POST `/robo/analyze/`

ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Neo4j ê·¸ë˜í”„ ë°ì´í„° ìƒì„±

**Request Headers:**
- `Session-UUID`: ì‚¬ìš©ì ì„¸ì…˜ ID (í•„ìˆ˜)
- `OpenAI-Api-Key`: LLM API í‚¤ (í•„ìˆ˜)
- `Accept-Language`: ì¶œë ¥ ì–¸ì–´ (ê¸°ë³¸: `ko`)

**Request Body:**
```json
{
  "projectName": "my-project",
  "strategy": "framework",  // "framework" ë˜ëŠ” "dbms"
  "target": "java"          // "java", "oracle" ë“±
}
```

**Response:**
- Content-Type: `application/x-ndjson`
- ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ (NDJSON í˜•ì‹)

**ì‘ë‹µ ì´ë²¤íŠ¸ íƒ€ì…:**

1. **message** (ì§„í–‰ ìƒí™© ë©”ì‹œì§€)
```json
{"type": "message", "content": "ğŸš€ í”„ë ˆì„ì›Œí¬ ì½”ë“œ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤"}
{"type": "message", "content": "ğŸ“¦ í”„ë¡œì íŠ¸: my-project"}
{"type": "message", "content": "ğŸ—ï¸ [Phase 1] AST êµ¬ì¡° ê·¸ë˜í”„ ìƒì„± (10ê°œ íŒŒì¼ ë³‘ë ¬)"}
```

2. **data** (ê·¸ë˜í”„ ë°ì´í„°)
```json
{
  "type": "data",
  "graph": {
    "Nodes": [
      {
        "Node ID": "4:...",
        "Labels": ["CLASS"],
        "Properties": {
          "class_name": "OrderService",
          "user_id": "user-123",
          "project_name": "my-project",
          "startLine": 10,
          "endLine": 150
        }
      }
    ],
    "Relationships": [
      {
        "Relationship ID": "5:...",
        "Type": "CALLS",
        "Start Node ID": "4:...",
        "End Node ID": "6:...",
        "Properties": {"method": "save"}
      }
    ]
  },
  "line_number": 150,
  "analysis_progress": 75,
  "current_file": "OrderService.java"
}
```

3. **error** (ì˜¤ë¥˜)
```json
{
  "type": "error",
  "content": "ë¶„ì„ ì‹¤íŒ¨: LLM ì‘ë‹µì˜ ë¼ì¸ ë²ˆí˜¸ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
  "errorType": "AnalysisError",
  "traceId": "stream-abc123"
}
```

4. **complete** (ì™„ë£Œ)
```json
{"type": "complete"}
```

**ì˜ˆì‹œ:**
```bash
curl -X POST http://localhost:5502/robo/analyze/ \
  -H "Content-Type: application/json" \
  -H "Session-UUID: your-session-id" \
  -H "OpenAI-Api-Key: your-api-key" \
  -d '{
    "projectName": "my-project",
    "strategy": "framework",
    "target": "java"
  }'
```

### DELETE `/robo/data/`

ì‚¬ìš©ì ë°ì´í„° ì „ì²´ ì‚­ì œ (ì„ì‹œ íŒŒì¼ + Neo4j ê·¸ë˜í”„)

**Request Headers:**
- `Session-UUID`: ì„¸ì…˜ UUID (í•„ìˆ˜)

**Response:**
```json
{
  "message": "ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

### GET `/`

í—¬ìŠ¤ì²´í¬

**Response:**
```json
{
  "status": "ok",
  "service": "robo-analyzer",
  "version": "2.0.0"
}
```

### GET `/health`

ìƒì„¸ í—¬ìŠ¤ì²´í¬

**Response:**
```json
{
  "status": "healthy",
  "service": "robo-analyzer",
  "version": "2.0.0",
  "config": {
    "file_concurrency": 5,
    "max_concurrency": 5
  }
}
```

---

## ë¶„ì„ ì „ëµ

### Framework ë¶„ì„ (Java/Kotlin)

Framework ë¶„ì„ì€ 3ë‹¨ê³„ë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

#### Phase 1: AST ê·¸ë˜í”„ ìƒì„±

ëª¨ë“  íŒŒì¼ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ì—¬ ì •ì  ê·¸ë˜í”„ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ìƒì„±ë˜ëŠ” ë…¸ë“œ:**
- `CLASS`, `INTERFACE`, `ENUM`: í´ë˜ìŠ¤ êµ¬ì¡°
- `METHOD`, `CONSTRUCTOR`: ë©”ì„œë“œ
- `FIELD`, `PARAMETER`: í•„ë“œ/íŒŒë¼ë¯¸í„°

**ìƒì„±ë˜ëŠ” ê´€ê³„:**
- `PARENT_OF`: ë¶€ëª¨-ìì‹ ê´€ê³„ (í´ë˜ìŠ¤ â†’ ë©”ì„œë“œ)
- `NEXT`: í˜•ì œ ìˆœì„œ ê´€ê³„ (ë©”ì„œë“œ1 â†’ ë©”ì„œë“œ2)
- `HAS_METHOD`, `HAS_FIELD`: í¬í•¨ ê´€ê³„

**Cypher ì¿¼ë¦¬ ì˜ˆì‹œ:**
```cypher
MERGE (n:CLASS {
  class_name: 'OrderService',
  user_id: 'user-123',
  project_name: 'my-project'
})
SET n.startLine = 10,
    n.endLine = 150,
    n.directory = 'com/example',
    n.file_name = 'OrderService.java'
RETURN n
```

#### Phase 2: LLM ë¶„ì„

ëª¨ë“  íŒŒì¼ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ì—¬ LLMì„ í†µí•œ ì½”ë“œ ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ì¶”ê°€ë˜ëŠ” ì •ë³´:**
- `summary`: ì½”ë“œ ìš”ì•½
- `CALLS`: ë©”ì„œë“œ í˜¸ì¶œ ê´€ê³„
- `DEPENDENCY`: íƒ€ì… ì˜ì¡´ì„± ê´€ê³„
- `ASSOCIATION`, `COMPOSITION`: í´ë˜ìŠ¤ ê´€ê³„

**Cypher ì¿¼ë¦¬ ì˜ˆì‹œ:**
```cypher
MATCH (src:CLASS {
  startLine: 10,
  directory: 'com/example',
  file_name: 'OrderService.java',
  user_id: 'user-123',
  project_name: 'my-project'
})
SET src.summary = 'ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤...'
RETURN src
```

```cypher
MATCH (src:CLASS {...})
MATCH (dst:CLASS)
WHERE toLower(dst.class_name) = toLower('OrderRepository')
  AND dst.user_id = 'user-123'
  AND dst.project_name = 'my-project'
MERGE (src)-[r:CALLS {method: 'save'}]->(dst)
RETURN r
```

#### Phase 3: User Story ìƒì„±

ë¶„ì„ ì™„ë£Œ í›„ Neo4jì—ì„œ ìš”ì•½ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ User Story ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

### DBMS ë¶„ì„ (PL/SQL)

DBMS ë¶„ì„ì€ 4ë‹¨ê³„ë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

#### Phase 0: DDL ì²˜ë¦¬

DDL íŒŒì¼ì—ì„œ í…Œì´ë¸”/ì»¬ëŸ¼ ìŠ¤í‚¤ë§ˆë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.

**ìƒì„±ë˜ëŠ” ë…¸ë“œ:**
- `Table`: í…Œì´ë¸”
- `Column`: ì»¬ëŸ¼

**ìƒì„±ë˜ëŠ” ê´€ê³„:**
- `HAS_COLUMN`: í…Œì´ë¸” â†’ ì»¬ëŸ¼
- `FK_TO_TABLE`: ì™¸ë˜í‚¤ ê´€ê³„

#### Phase 1: AST ê·¸ë˜í”„ ìƒì„±

í”„ë¡œì‹œì €/í•¨ìˆ˜ íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ ì •ì  ê·¸ë˜í”„ êµ¬ì¡°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**ìƒì„±ë˜ëŠ” ë…¸ë“œ:**
- `PROCEDURE`, `FUNCTION`, `TRIGGER`: í”„ë¡œì‹œì €
- `Variable`: ë³€ìˆ˜

**ìƒì„±ë˜ëŠ” ê´€ê³„:**
- `PARENT_OF`: ë¶€ëª¨-ìì‹ ê´€ê³„
- `NEXT`: í˜•ì œ ìˆœì„œ ê´€ê³„

#### Phase 2: LLM ë¶„ì„

LLMì„ í†µí•œ ì½”ë“œ ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ì¶”ê°€ë˜ëŠ” ì •ë³´:**
- `summary`: í”„ë¡œì‹œì € ìš”ì•½
- `CALL`: í”„ë¡œì‹œì € í˜¸ì¶œ ê´€ê³„
- `FROM`: í…Œì´ë¸” ì½ê¸° ê´€ê³„
- `WRITES`: í…Œì´ë¸” ì“°ê¸° ê´€ê³„

#### Phase 3: User Story ìƒì„±

ë¶„ì„ ì™„ë£Œ í›„ User Story ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

## ê·¸ë˜í”„ ë°ì´í„° êµ¬ì¡°

### Framework (Java/Kotlin)

#### ë…¸ë“œ íƒ€ì…

**CLASS**
```json
{
  "Labels": ["CLASS"],
  "Properties": {
    "class_name": "OrderService",
    "user_id": "user-123",
    "project_name": "my-project",
    "directory": "com/example",
    "file_name": "OrderService.java",
    "startLine": 10,
    "endLine": 150,
    "summary": "ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤...",
    "node_code": "public class OrderService {...}"
  }
}
```

**METHOD**
```json
{
  "Labels": ["METHOD"],
  "Properties": {
    "name": "save",
    "user_id": "user-123",
    "project_name": "my-project",
    "directory": "com/example",
    "file_name": "OrderService.java",
    "startLine": 20,
    "endLine": 35,
    "summary": "ì£¼ë¬¸ì„ ì €ì¥í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤...",
    "return_type": "void",
    "node_code": "public void save(Order order) {...}"
  }
}
```

#### ê´€ê³„ íƒ€ì…

**CALLS** (ë©”ì„œë“œ í˜¸ì¶œ)
```json
{
  "Type": "CALLS",
  "Start Node ID": "4:...",
  "End Node ID": "6:...",
  "Properties": {
    "method": "save",
    "line_number": 25
  }
}
```

**EXTENDS** (ìƒì†)
```json
{
  "Type": "EXTENDS",
  "Start Node ID": "4:...",
  "End Node ID": "8:...",
  "Properties": {}
}
```

**DEPENDENCY** (ì˜ì¡´ì„±)
```json
{
  "Type": "DEPENDENCY",
  "Start Node ID": "4:...",
  "End Node ID": "10:...",
  "Properties": {
    "dependency_type": "import"
  }
}
```

### DBMS (PL/SQL)

#### ë…¸ë“œ íƒ€ì…

**PROCEDURE**
```json
{
  "Labels": ["PROCEDURE"],
  "Properties": {
    "procedure_name": "CREATE_ORDER",
    "user_id": "user-123",
    "project_name": "my-project",
    "directory": "procedures",
    "file_name": "order_proc.sql",
    "startLine": 10,
    "endLine": 50,
    "summary": "ì£¼ë¬¸ì„ ìƒì„±í•˜ëŠ” í”„ë¡œì‹œì €ì…ë‹ˆë‹¤...",
    "schema": "ORDER_SCHEMA"
  }
}
```

**Table**
```json
{
  "Labels": ["Table"],
  "Properties": {
    "name": "ORDERS",
    "schema": "ORDER_SCHEMA",
    "user_id": "user-123",
    "project_name": "my-project",
    "description": "ì£¼ë¬¸ í…Œì´ë¸”",
    "table_type": "BASE TABLE"
  }
}
```

#### ê´€ê³„ íƒ€ì…

**CALL** (í”„ë¡œì‹œì € í˜¸ì¶œ)
```json
{
  "Type": "CALL",
  "Start Node ID": "4:...",
  "End Node ID": "6:...",
  "Properties": {
    "line_number": 25
  }
}
```

**FROM** (í…Œì´ë¸” ì½ê¸°)
```json
{
  "Type": "FROM",
  "Start Node ID": "4:...",
  "End Node ID": "8:...",
  "Properties": {
    "line_number": 30
  }
}
```

**WRITES** (í…Œì´ë¸” ì“°ê¸°)
```json
{
  "Type": "WRITES",
  "Start Node ID": "4:...",
  "End Node ID": "8:...",
  "Properties": {
    "line_number": 35
  }
}
```

---

## ì„¤ì •

### í™˜ê²½ë³€ìˆ˜

| ë³€ìˆ˜ | ì„¤ëª… | ê¸°ë³¸ê°’ |
|------|------|--------|
| `NEO4J_URI` | Neo4j ì—°ê²° URI | `bolt://127.0.0.1:7687` |
| `NEO4J_USER` | Neo4j ì‚¬ìš©ìëª… | `neo4j` |
| `NEO4J_PASSWORD` | Neo4j ë¹„ë°€ë²ˆí˜¸ | (í•„ìˆ˜) |
| `LLM_API_KEY` | LLM API í‚¤ | (í•„ìˆ˜) |
| `LLM_API_BASE` | LLM API ê¸°ë³¸ URL | `https://api.openai.com/v1` |
| `LLM_MODEL` | ì‚¬ìš©í•  LLM ëª¨ë¸ | `gpt-4.1` |
| `LLM_MAX_TOKENS` | ìµœëŒ€ í† í° ìˆ˜ | `32768` |
| `FILE_CONCURRENCY` | íŒŒì¼ ë³‘ë ¬ ì²˜ë¦¬ ìˆ˜ | `5` |
| `MAX_CONCURRENCY` | ì²­í¬ ë³‘ë ¬ ì²˜ë¦¬ ìˆ˜ | `5` |
| `HOST` | ì„œë²„ í˜¸ìŠ¤íŠ¸ | `0.0.0.0` |
| `PORT` | ì„œë²„ í¬íŠ¸ | `5502` |

### ì„¤ì • íŒŒì¼ êµ¬ì¡°

ì„¤ì •ì€ `config/settings.py`ì—ì„œ ì¤‘ì•™ ê´€ë¦¬ë©ë‹ˆë‹¤:

```python
from config.settings import settings

# Neo4j ì„¤ì •
neo4j_uri = settings.neo4j.uri
neo4j_user = settings.neo4j.user

# LLM ì„¤ì •
llm_api_key = settings.llm.api_key
llm_model = settings.llm.model

# ë³‘ë ¬ ì²˜ë¦¬ ì„¤ì •
file_concurrency = settings.concurrency.file_concurrency
max_concurrency = settings.concurrency.max_concurrency
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- **FastAPI**: ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬
- **Python 3.11+**: í”„ë¡œê·¸ë˜ë° ì–¸ì–´

### ë°ì´í„°ë² ì´ìŠ¤
- **Neo4j 5.x**: ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤
- **Cypher**: ê·¸ë˜í”„ ì¿¼ë¦¬ ì–¸ì–´

### AI/ML
- **LangChain**: LLM í†µí•© í”„ë ˆì„ì›Œí¬
- **OpenAI API**: LLM ì„œë¹„ìŠ¤ (ë˜ëŠ” í˜¸í™˜ API)

### ìœ í‹¸ë¦¬í‹°
- **aiofiles**: ë¹„ë™ê¸° íŒŒì¼ I/O
- **tiktoken**: í† í° ê³„ì‚°
- **Jinja2**: í…œí”Œë¦¿ ì—”ì§„
- **PyYAML**: YAML íŒŒì‹±

---

## ê¸°ì—¬í•˜ê¸°

1. ì´ ì €ì¥ì†Œë¥¼ Fork í•©ë‹ˆë‹¤
2. ê¸°ëŠ¥ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤ (`git commit -m 'Add amazing feature'`)
4. ë¸Œëœì¹˜ì— í‘¸ì‹œí•©ë‹ˆë‹¤ (`git push origin feature/amazing-feature`)
5. Pull Requestë¥¼ ìƒì„±í•©ë‹ˆë‹¤

---

## ë¼ì´ì„ ìŠ¤

MIT License

---

## ë²„ì „ íˆìŠ¤í† ë¦¬

### v2.0.0 (í˜„ì¬)
- 2ë‹¨ê³„ ë¶„ì„ ì•„í‚¤í…ì²˜ (Phase 1: AST â†’ Phase 2: LLM)
- ì´ì¤‘ ë³‘ë ¬ ì²˜ë¦¬ (íŒŒì¼ ë ˆë²¨ + ì²­í¬ ë ˆë²¨)
- ë©”ì„œë“œ í˜¸ì¶œ ì²˜ë¦¬ ë‹¨ìˆœí™” (calls ë°°ì—´ í†µí•©)
- ì˜ˆì™¸ ì²˜ë¦¬ ì—„ê²©í™”
- í™˜ê²½ë³€ìˆ˜ ì¤‘ì•™ ê´€ë¦¬

---

*ì‘ì„±ì¼: 2025-01-XX*
*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-01-XX*
